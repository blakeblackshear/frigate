{"version":3,"sources":["vs/editor/contrib/folding/browser/foldingDecorations.ts"],"names":[],"mappings":"AAAA;;;gGAGgG;AAEhG,OAAO,EAAE,OAAO,EAAE,MAAM,qCAAqC,CAAC;AAG9D,OAAO,EAAE,sBAAsB,EAAE,MAAM,oCAAoC,CAAC;AAE5E,OAAO,EAAE,QAAQ,EAAE,MAAM,oBAAoB,CAAC;AAC9C,OAAO,EAAE,yBAAyB,EAAE,cAAc,EAAE,aAAa,EAAE,WAAW,EAAE,MAAM,oDAAoD,CAAC;AAC3I,OAAO,EAAE,YAAY,EAAE,MAAM,mDAAmD,CAAC;AACjF,OAAO,EAAE,gBAAgB,EAAE,MAAM,mDAAmD,CAAC;AACrF,OAAO,EAAE,SAAS,EAAE,MAAM,sCAAsC,CAAC;AAEjE,MAAM,cAAc,GAAG,aAAa,CAAC,uBAAuB,EAAE,EAAE,KAAK,EAAE,WAAW,CAAC,yBAAyB,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,WAAW,CAAC,yBAAyB,EAAE,GAAG,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,QAAQ,CAAC,GAA0B,EAAE,+GAA+G,CAAC,EAAE,IAAI,CAAC,CAAC;AACnW,aAAa,CAAC,kCAAkC,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,QAAQ,CAAC,GAAoB,EAAE,qEAAqE,CAAC,CAAC,CAAC;AAC7N,aAAa,CAAC,uCAAuC,EAAE,cAAc,EAAE,QAAQ,CAAC,GAAuC,EAAE,oDAAoD,CAAC,CAAC,CAAC;AAEhL,MAAM,CAAC,MAAM,mBAAmB,GAAG,YAAY,CAAC,kBAAkB,EAAE,OAAO,CAAC,WAAW,EAAE,QAAQ,CAAC,GAAqB,EAAE,sDAAsD,CAAC,CAAC,CAAC;AAClL,MAAM,CAAC,MAAM,oBAAoB,GAAG,YAAY,CAAC,mBAAmB,EAAE,OAAO,CAAC,YAAY,EAAE,QAAQ,CAAC,GAAsB,EAAE,uDAAuD,CAAC,CAAC,CAAC;AACvL,MAAM,CAAC,MAAM,0BAA0B,GAAG,YAAY,CAAC,0BAA0B,EAAE,oBAAoB,EAAE,QAAQ,CAAC,GAA2B,EAAE,gEAAgE,CAAC,CAAC,CAAC;AAClN,MAAM,CAAC,MAAM,yBAAyB,GAAG,YAAY,CAAC,yBAAyB,EAAE,mBAAmB,EAAE,QAAQ,CAAC,IAA2B,EAAE,+DAA+D,CAAC,CAAC,CAAC;AAE9M,MAAM,uBAAuB,GAAG,EAAE,KAAK,EAAE,gBAAgB,CAAC,cAAc,CAAC,EAAE,QAAQ,gCAAwB,EAAE,CAAC;AAE9G,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAgB,EAAE,4BAA4B,CAAC,CAAC;AAC3E,MAAM,QAAQ,GAAG,QAAQ,CAAC,IAAe,EAAE,8BAA8B,CAAC,CAAC;AAE3E,MAAM,OAAO,yBAAyB;aAEb,gCAA2B,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QACrF,WAAW,EAAE,qCAAqC;QAClD,UAAU,6DAAqD;QAC/D,qBAAqB,EAAE,eAAe;QACtC,WAAW,EAAE,IAAI;QACjB,uBAAuB,EAAE,SAAS;QAClC,4BAA4B,EAAE,SAAS,CAAC,WAAW,CAAC,oBAAoB,CAAC;KACzE,CAPkD,AAOjD,CAAC;aAEqB,4CAAuC,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QACjG,WAAW,EAAE,iDAAiD;QAC9D,UAAU,6DAAqD;QAC/D,qBAAqB,EAAE,eAAe;QACtC,SAAS,EAAE,mBAAmB;QAC9B,OAAO,EAAE,uBAAuB;QAChC,WAAW,EAAE,IAAI;QACjB,uBAAuB,EAAE,SAAS;QAClC,4BAA4B,EAAE,SAAS,CAAC,WAAW,CAAC,oBAAoB,CAAC;KACzE,CAT8D,AAS7D,CAAC;aAEqB,yCAAoC,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAC9F,WAAW,EAAE,8CAA8C;QAC3D,UAAU,6DAAqD;QAC/D,qBAAqB,EAAE,eAAe;QACtC,WAAW,EAAE,IAAI;QACjB,uBAAuB,EAAE,SAAS;QAClC,4BAA4B,EAAE,SAAS,CAAC,WAAW,CAAC,0BAA0B,CAAC;KAC/E,CAP2D,AAO1D,CAAC;aAEqB,qDAAgD,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAC1G,WAAW,EAAE,0DAA0D;QACvE,UAAU,6DAAqD;QAC/D,qBAAqB,EAAE,eAAe;QACtC,SAAS,EAAE,mBAAmB;QAC9B,OAAO,EAAE,uBAAuB;QAChC,WAAW,EAAE,IAAI;QACjB,uBAAuB,EAAE,SAAS;QAClC,4BAA4B,EAAE,SAAS,CAAC,WAAW,CAAC,0BAA0B,CAAC;KAC/E,CATuE,AAStE,CAAC;aAEqB,2CAAsC,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAChG,WAAW,EAAE,sCAAsC;QACnD,UAAU,6DAAqD;QAC/D,qBAAqB,EAAE,eAAe;QACtC,WAAW,EAAE,IAAI;QACjB,uBAAuB,EAAE,SAAS;KAClC,CAN6D,AAM5D,CAAC;aAEqB,uDAAkD,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAC5G,WAAW,EAAE,sCAAsC;QACnD,UAAU,6DAAqD;QAC/D,qBAAqB,EAAE,eAAe;QACtC,SAAS,EAAE,mBAAmB;QAC9B,OAAO,EAAE,uBAAuB;QAChC,WAAW,EAAE,IAAI;QACjB,uBAAuB,EAAE,SAAS;KAClC,CARyE,AAQxE,CAAC;aAEqB,+BAA0B,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QACpF,WAAW,EAAE,oCAAoC;QACjD,UAAU,4DAAoD;QAC9D,WAAW,EAAE,IAAI;QACjB,4BAA4B,EAAE,sBAAsB,GAAG,SAAS,CAAC,WAAW,CAAC,mBAAmB,CAAC;QACjG,uBAAuB,EAAE,QAAQ;KACjC,CANiD,AAMhD,CAAC;aAEqB,yCAAoC,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAC9F,WAAW,EAAE,8CAA8C;QAC3D,UAAU,4DAAoD;QAC9D,WAAW,EAAE,IAAI;QACjB,4BAA4B,EAAE,SAAS,CAAC,WAAW,CAAC,mBAAmB,CAAC;QACxE,uBAAuB,EAAE,QAAQ;KACjC,CAN2D,AAM1D,CAAC;aAEqB,wCAAmC,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAC7F,WAAW,EAAE,6CAA6C;QAC1D,UAAU,6DAAqD;QAC/D,WAAW,EAAE,IAAI;QACjB,4BAA4B,EAAE,sBAAsB,GAAG,SAAS,CAAC,WAAW,CAAC,yBAAyB,CAAC;QACvG,uBAAuB,EAAE,QAAQ;KACjC,CAN0D,AAMzD,CAAC;aAEqB,kDAA6C,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QACvG,WAAW,EAAE,uDAAuD;QACpE,UAAU,6DAAqD;QAC/D,WAAW,EAAE,IAAI;QACjB,4BAA4B,EAAE,SAAS,CAAC,WAAW,CAAC,yBAAyB,CAAC;QAC9E,uBAAuB,EAAE,QAAQ;KACjC,CANoE,AAMnE,CAAC;aAEqB,0CAAqC,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAC/F,WAAW,EAAE,sCAAsC;QACnD,UAAU,6DAAqD;QAC/D,WAAW,EAAE,IAAI;KACjB,CAJ4D,AAI3D,CAAC;aAEqB,4BAAuB,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QACjF,WAAW,EAAE,iCAAiC;QAC9C,UAAU,4DAAoD;KAC9D,CAH8C,AAG7C,CAAC;IAMH,YAA6B,MAAmB;QAAnB,WAAM,GAAN,MAAM,CAAa;QAJzC,wBAAmB,GAAqC,WAAW,CAAC;QAEpE,0BAAqB,GAAY,IAAI,CAAC;IAG7C,CAAC;IAED,mBAAmB,CAAC,WAAoB,EAAE,QAAiB,EAAE,QAAiB;QAC7E,IAAI,QAAQ,EAAE,CAAC,CAAC,qCAAqC;YACpD,OAAO,yBAAyB,CAAC,uBAAuB,CAAC;QAC1D,CAAC;QACD,IAAI,IAAI,CAAC,mBAAmB,KAAK,OAAO,EAAE,CAAC;YAC1C,IAAI,WAAW,EAAE,CAAC;gBACjB,OAAO,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,yBAAyB,CAAC,kDAAkD,CAAC,CAAC,CAAC,yBAAyB,CAAC,sCAAsC,CAAC;YACrL,CAAC;YACD,OAAO,yBAAyB,CAAC,qCAAqC,CAAC;QACxE,CAAC;QACD,IAAI,WAAW,EAAE,CAAC;YACjB,OAAO,QAAQ,CAAC,CAAC;gBAChB,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,yBAAyB,CAAC,gDAAgD,CAAC,CAAC,CAAC,yBAAyB,CAAC,oCAAoC,CAAC;gBAC1K,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,yBAAyB,CAAC,uCAAuC,CAAC,CAAC,CAAC,yBAAyB,CAAC,2BAA2B,CAAC,CAAC;QAC7J,CAAC;aAAM,IAAI,IAAI,CAAC,mBAAmB,KAAK,WAAW,EAAE,CAAC;YACrD,OAAO,QAAQ,CAAC,CAAC,CAAC,yBAAyB,CAAC,6CAA6C,CAAC,CAAC,CAAC,yBAAyB,CAAC,oCAAoC,CAAC;QAC5J,CAAC;aAAM,CAAC;YACP,OAAO,QAAQ,CAAC,CAAC,CAAC,yBAAyB,CAAC,mCAAmC,CAAC,CAAC,CAAC,yBAAyB,CAAC,0BAA0B,CAAC;QACxI,CAAC;IACF,CAAC;IAED,iBAAiB,CAAI,QAAgE;QACpF,OAAO,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;IAChD,CAAC;IAED,iBAAiB,CAAC,aAAuB;QACxC,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC;IAC9C,CAAC","file":"foldingDecorations.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { IModelDecorationOptions, IModelDecorationsChangeAccessor, MinimapPosition, TrackedRangeStickiness } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { IDecorationProvider } from './foldingModel.js';\nimport { localize } from '../../../../nls.js';\nimport { editorSelectionBackground, iconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\n\nconst foldBackground = registerColor('editor.foldBackground', { light: transparent(editorSelectionBackground, 0.3), dark: transparent(editorSelectionBackground, 0.3), hcDark: null, hcLight: null }, localize('foldBackgroundBackground', \"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations.\"), true);\nregisterColor('editor.foldPlaceholderForeground', { light: '#808080', dark: '#808080', hcDark: null, hcLight: null }, localize('collapsedTextColor', \"Color of the collapsed text after the first line of a folded range.\"));\nregisterColor('editorGutter.foldingControlForeground', iconForeground, localize('editorGutter.foldingControlForeground', 'Color of the folding control in the editor gutter.'));\n\nexport const foldingExpandedIcon = registerIcon('folding-expanded', Codicon.chevronDown, localize('foldingExpandedIcon', 'Icon for expanded ranges in the editor glyph margin.'));\nexport const foldingCollapsedIcon = registerIcon('folding-collapsed', Codicon.chevronRight, localize('foldingCollapsedIcon', 'Icon for collapsed ranges in the editor glyph margin.'));\nexport const foldingManualCollapsedIcon = registerIcon('folding-manual-collapsed', foldingCollapsedIcon, localize('foldingManualCollapedIcon', 'Icon for manually collapsed ranges in the editor glyph margin.'));\nexport const foldingManualExpandedIcon = registerIcon('folding-manual-expanded', foldingExpandedIcon, localize('foldingManualExpandedIcon', 'Icon for manually expanded ranges in the editor glyph margin.'));\n\nconst foldedBackgroundMinimap = { color: themeColorFromId(foldBackground), position: MinimapPosition.Inline };\n\nconst collapsed = localize('linesCollapsed', \"Click to expand the range.\");\nconst expanded = localize('linesExpanded', \"Click to collapse the range.\");\n\nexport class FoldingDecorationProvider implements IDecorationProvider {\n\n\tprivate static readonly COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-collapsed-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon),\n\t});\n\n\tprivate static readonly COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-collapsed-highlighted-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tclassName: 'folded-background',\n\t\tminimap: foldedBackgroundMinimap,\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingCollapsedIcon)\n\t});\n\n\tprivate static readonly MANUALLY_COLLAPSED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-collapsed-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n\t});\n\n\tprivate static readonly MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-collapsed-highlighted-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tclassName: 'folded-background',\n\t\tminimap: foldedBackgroundMinimap,\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingManualCollapsedIcon)\n\t});\n\n\tprivate static readonly NO_CONTROLS_COLLAPSED_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-no-controls-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t});\n\n\tprivate static readonly NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-no-controls-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tafterContentClassName: 'inline-folded',\n\t\tclassName: 'folded-background',\n\t\tminimap: foldedBackgroundMinimap,\n\t\tisWholeLine: true,\n\t\tlinesDecorationsTooltip: collapsed,\n\t});\n\n\tprivate static readonly EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-expanded-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-expanded-auto-hide-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly MANUALLY_EXPANDED_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-expanded-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: 'alwaysShowFoldIcons ' + ThemeIcon.asClassName(foldingManualExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-manually-expanded-auto-hide-visual-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true,\n\t\tfirstLineDecorationClassName: ThemeIcon.asClassName(foldingManualExpandedIcon),\n\t\tlinesDecorationsTooltip: expanded,\n\t});\n\n\tprivate static readonly NO_CONTROLS_EXPANDED_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-no-controls-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges,\n\t\tisWholeLine: true\n\t});\n\n\tprivate static readonly HIDDEN_RANGE_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'folding-hidden-range-decoration',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t});\n\n\tpublic showFoldingControls: 'always' | 'never' | 'mouseover' = 'mouseover';\n\n\tpublic showFoldingHighlights: boolean = true;\n\n\tconstructor(private readonly editor: ICodeEditor) {\n\t}\n\n\tgetDecorationOption(isCollapsed: boolean, isHidden: boolean, isManual: boolean): IModelDecorationOptions {\n\t\tif (isHidden) { // is inside another collapsed region\n\t\t\treturn FoldingDecorationProvider.HIDDEN_RANGE_DECORATION;\n\t\t}\n\t\tif (this.showFoldingControls === 'never') {\n\t\t\tif (isCollapsed) {\n\t\t\t\treturn this.showFoldingHighlights ? FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION : FoldingDecorationProvider.NO_CONTROLS_COLLAPSED_RANGE_DECORATION;\n\t\t\t}\n\t\t\treturn FoldingDecorationProvider.NO_CONTROLS_EXPANDED_RANGE_DECORATION;\n\t\t}\n\t\tif (isCollapsed) {\n\t\t\treturn isManual ?\n\t\t\t\t(this.showFoldingHighlights ? FoldingDecorationProvider.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.MANUALLY_COLLAPSED_VISUAL_DECORATION)\n\t\t\t\t: (this.showFoldingHighlights ? FoldingDecorationProvider.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION : FoldingDecorationProvider.COLLAPSED_VISUAL_DECORATION);\n\t\t} else if (this.showFoldingControls === 'mouseover') {\n\t\t\treturn isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_AUTO_HIDE_VISUAL_DECORATION;\n\t\t} else {\n\t\t\treturn isManual ? FoldingDecorationProvider.MANUALLY_EXPANDED_VISUAL_DECORATION : FoldingDecorationProvider.EXPANDED_VISUAL_DECORATION;\n\t\t}\n\t}\n\n\tchangeDecorations<T>(callback: (changeAccessor: IModelDecorationsChangeAccessor) => T): T {\n\t\treturn this.editor.changeDecorations(callback);\n\t}\n\n\tremoveDecorations(decorationIds: string[]): void {\n\t\tthis.editor.removeDecorations(decorationIds);\n\t}\n}\n"]}