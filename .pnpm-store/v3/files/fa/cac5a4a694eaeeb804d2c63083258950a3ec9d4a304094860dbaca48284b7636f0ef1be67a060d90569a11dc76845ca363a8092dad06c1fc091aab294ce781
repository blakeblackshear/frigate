{"version":3,"sources":["vs/editor/browser/widget/diffEditor/components/diffEditorEditors.ts"],"names":[],"mappings":"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","file":"diffEditorEditors.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { IReader, autorunHandleChanges, derived, derivedOpts, observableFromEvent } from '../../../../../base/common/observable.js';\nimport { IEditorConstructionOptions } from '../../../config/editorConfiguration.js';\nimport { IDiffEditorConstructionOptions } from '../../../editorBrowser.js';\nimport { observableCodeEditor } from '../../../observableCodeEditor.js';\nimport { CodeEditorWidget, ICodeEditorWidgetOptions } from '../../codeEditor/codeEditorWidget.js';\nimport { IDiffCodeEditorWidgetOptions } from '../diffEditorWidget.js';\nimport { OverviewRulerFeature } from '../features/overviewRulerFeature.js';\nimport { EditorOptions, IEditorOptions } from '../../../../common/config/editorOptions.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { IContentSizeChangedEvent } from '../../../../common/editorCommon.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { DiffEditorOptions } from '../diffEditorOptions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\n\nexport class DiffEditorEditors extends Disposable {\n\tpublic readonly original;\n\tpublic readonly modified;\n\n\tprivate readonly _onDidContentSizeChange;\n\tpublic get onDidContentSizeChange() { return this._onDidContentSizeChange.event; }\n\n\tpublic readonly modifiedScrollTop;\n\tpublic readonly modifiedScrollHeight;\n\n\tpublic readonly modifiedObs;\n\tpublic readonly originalObs;\n\n\tpublic readonly modifiedModel;\n\n\tpublic readonly modifiedSelections;\n\tpublic readonly modifiedCursor;\n\n\tpublic readonly originalCursor;\n\n\tpublic readonly isOriginalFocused;\n\tpublic readonly isModifiedFocused;\n\n\tpublic readonly isFocused;\n\n\tconstructor(\n\t\tprivate readonly originalEditorElement: HTMLElement,\n\t\tprivate readonly modifiedEditorElement: HTMLElement,\n\t\tprivate readonly _options: DiffEditorOptions,\n\t\tprivate _argCodeEditorWidgetOptions: IDiffCodeEditorWidgetOptions,\n\t\tprivate readonly _createInnerEditor: (instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<IEditorOptions>, editorWidgetOptions: ICodeEditorWidgetOptions) => CodeEditorWidget,\n\t\t@IContextKeyService private readonly _contextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\t\tthis.original = this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(), this._argCodeEditorWidgetOptions.originalEditor || {}));\n\t\tthis.modified = this._register(this._createRightHandSideEditor(this._options.editorOptions.get(), this._argCodeEditorWidgetOptions.modifiedEditor || {}));\n\t\tthis._onDidContentSizeChange = this._register(new Emitter<IContentSizeChangedEvent>());\n\t\tthis.modifiedScrollTop = observableFromEvent(this, this.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this.modified.getScrollTop());\n\t\tthis.modifiedScrollHeight = observableFromEvent(this, this.modified.onDidScrollChange, () => /** @description modified.getScrollHeight */ this.modified.getScrollHeight());\n\t\tthis.modifiedObs = observableCodeEditor(this.modified);\n\t\tthis.originalObs = observableCodeEditor(this.original);\n\t\tthis.modifiedModel = this.modifiedObs.model;\n\t\tthis.modifiedSelections = observableFromEvent(this, this.modified.onDidChangeCursorSelection, () => this.modified.getSelections() ?? []);\n\t\tthis.modifiedCursor = derivedOpts({ owner: this, equalsFn: Position.equals }, reader => this.modifiedSelections.read(reader)[0]?.getPosition() ?? new Position(1, 1));\n\t\tthis.originalCursor = observableFromEvent(this, this.original.onDidChangeCursorPosition, () => this.original.getPosition() ?? new Position(1, 1));\n\t\tthis.isOriginalFocused = observableCodeEditor(this.original).isFocused;\n\t\tthis.isModifiedFocused = observableCodeEditor(this.modified).isFocused;\n\t\tthis.isFocused = derived(this, reader => this.isOriginalFocused.read(reader) || this.isModifiedFocused.read(reader));\n\n\t\tthis._argCodeEditorWidgetOptions = null as any;\n\n\t\tthis._register(autorunHandleChanges({\n\t\t\tchangeTracker: {\n\t\t\t\tcreateChangeSummary: (): IDiffEditorConstructionOptions => ({}),\n\t\t\t\thandleChange: (ctx, changeSummary) => {\n\t\t\t\t\tif (ctx.didChange(_options.editorOptions)) {\n\t\t\t\t\t\tObject.assign(changeSummary, ctx.change.changedOptions);\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}, (reader, changeSummary) => {\n\t\t\t/** @description update editor options */\n\t\t\t_options.editorOptions.read(reader);\n\n\t\t\tthis._options.renderSideBySide.read(reader);\n\n\t\t\tthis.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n\t\t\tthis.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n\t\t}));\n\t}\n\n\tprivate _createLeftHandSideEditor(options: Readonly<IDiffEditorConstructionOptions>, codeEditorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n\t\tconst editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n\n\t\tconst isInDiffLeftEditorKey = this._contextKeyService.createKey<boolean>('isInDiffLeftEditor', editor.hasWidgetFocus());\n\t\tthis._register(editor.onDidFocusEditorWidget(() => isInDiffLeftEditorKey.set(true)));\n\t\tthis._register(editor.onDidBlurEditorWidget(() => isInDiffLeftEditorKey.set(false)));\n\n\t\treturn editor;\n\t}\n\n\tprivate _createRightHandSideEditor(options: Readonly<IDiffEditorConstructionOptions>, codeEditorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n\t\tconst editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n\n\t\tconst isInDiffRightEditorKey = this._contextKeyService.createKey<boolean>('isInDiffRightEditor', editor.hasWidgetFocus());\n\t\tthis._register(editor.onDidFocusEditorWidget(() => isInDiffRightEditorKey.set(true)));\n\t\tthis._register(editor.onDidBlurEditorWidget(() => isInDiffRightEditorKey.set(false)));\n\n\t\treturn editor;\n\t}\n\n\tprivate _constructInnerEditor(instantiationService: IInstantiationService, container: HTMLElement, options: Readonly<IEditorConstructionOptions>, editorWidgetOptions: ICodeEditorWidgetOptions): CodeEditorWidget {\n\t\tconst editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n\n\t\tthis._register(editor.onDidContentSizeChange(e => {\n\t\t\tconst width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\t\t\tconst height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n\n\t\t\tthis._onDidContentSizeChange.fire({\n\t\t\t\tcontentHeight: height,\n\t\t\t\tcontentWidth: width,\n\t\t\t\tcontentHeightChanged: e.contentHeightChanged,\n\t\t\t\tcontentWidthChanged: e.contentWidthChanged\n\t\t\t});\n\t\t}));\n\t\treturn editor;\n\t}\n\n\tprivate _adjustOptionsForLeftHandSide(_reader: IReader | undefined, changedOptions: Readonly<IDiffEditorConstructionOptions>): IEditorConstructionOptions {\n\t\tconst result = this._adjustOptionsForSubEditor(changedOptions);\n\t\tif (!this._options.renderSideBySide.get()) {\n\t\t\t// never wrap hidden editor\n\t\t\tresult.wordWrapOverride1 = 'off';\n\t\t\tresult.wordWrapOverride2 = 'off';\n\t\t\tresult.stickyScroll = { enabled: false };\n\n\t\t\t// Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\n\t\t\tresult.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\n\t\t} else {\n\t\t\tresult.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\n\t\t\tresult.wordWrapOverride1 = this._options.diffWordWrap.get();\n\t\t}\n\t\tresult.glyphMargin = this._options.renderSideBySide.get();\n\n\t\tif (changedOptions.originalAriaLabel) {\n\t\t\tresult.ariaLabel = changedOptions.originalAriaLabel;\n\t\t}\n\t\tresult.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n\t\tresult.readOnly = !this._options.originalEditable.get();\n\t\tresult.dropIntoEditor = { enabled: !result.readOnly };\n\t\tresult.extraEditorClassName = 'original-in-monaco-diff-editor';\n\t\treturn result;\n\t}\n\n\tprivate _adjustOptionsForRightHandSide(reader: IReader | undefined, changedOptions: Readonly<IDiffEditorConstructionOptions>): IEditorConstructionOptions {\n\t\tconst result = this._adjustOptionsForSubEditor(changedOptions);\n\t\tif (changedOptions.modifiedAriaLabel) {\n\t\t\tresult.ariaLabel = changedOptions.modifiedAriaLabel;\n\t\t}\n\t\tresult.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n\t\tresult.wordWrapOverride1 = this._options.diffWordWrap.get();\n\t\tresult.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n\t\tresult.scrollbar!.verticalHasArrows = false;\n\t\tresult.extraEditorClassName = 'modified-in-monaco-diff-editor';\n\t\treturn result;\n\t}\n\n\tprivate _adjustOptionsForSubEditor(options: Readonly<IDiffEditorConstructionOptions>): IEditorConstructionOptions {\n\t\tconst clonedOptions = {\n\t\t\t...options,\n\t\t\tdimension: {\n\t\t\t\theight: 0,\n\t\t\t\twidth: 0\n\t\t\t},\n\t\t};\n\t\tclonedOptions.inDiffEditor = true;\n\t\tclonedOptions.automaticLayout = false;\n\t\tclonedOptions.allowVariableLineHeights = false;\n\t\tclonedOptions.allowVariableFonts = false;\n\t\tclonedOptions.allowVariableFontsInAccessibilityMode = false;\n\n\t\t// Clone scrollbar options before changing them\n\t\tclonedOptions.scrollbar = { ...(clonedOptions.scrollbar || {}) };\n\t\tclonedOptions.folding = false;\n\t\tclonedOptions.codeLens = this._options.diffCodeLens.get();\n\t\tclonedOptions.fixedOverflowWidgets = true;\n\n\t\t// Clone minimap options before changing them\n\t\tclonedOptions.minimap = { ...(clonedOptions.minimap || {}) };\n\t\tclonedOptions.minimap.enabled = false;\n\n\t\tif (this._options.hideUnchangedRegions.get()) {\n\t\t\tclonedOptions.stickyScroll = { enabled: false };\n\t\t} else {\n\t\t\tclonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n\t\t}\n\t\treturn clonedOptions;\n\t}\n\n\tprivate _updateAriaLabel(ariaLabel: string | undefined): string | undefined {\n\t\tif (!ariaLabel) {\n\t\t\tariaLabel = '';\n\t\t}\n\t\tconst ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')?.getAriaLabel());\n\t\tif (this._options.accessibilityVerbose.get()) {\n\t\t\treturn ariaLabel + ariaNavigationTip;\n\t\t} else if (ariaLabel) {\n\t\t\treturn ariaLabel.replaceAll(ariaNavigationTip, '');\n\t\t}\n\t\treturn '';\n\t}\n}\n"]}