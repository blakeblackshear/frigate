{"version":3,"sources":["file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/contrib/zoneWidget/browser/zoneWidget.ts","vs/editor/contrib/zoneWidget/browser/zoneWidget.ts"],"names":[],"mappings":"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","file":"zoneWidget.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["\nimport * as domStylesheetsJs from '../../../../base/browser/domStylesheets.js';\nimport { IHorizontalSashLayoutProvider, ISashEvent, Orientation, Sash, SashState } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { ICodeEditor, IOverlayWidget, IOverlayWidgetPosition, IViewZone, IViewZoneChangeAccessor } from '../../../browser/editorBrowser.js';\nimport { EditorLayoutInfo, EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { IEditorDecorationsCollection, ScrollType } from '../../../common/editorCommon.js';\nimport { TrackedRangeStickiness } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\n\nexport interface IOptions {\n\tshowFrame?: boolean;\n\tshowArrow?: boolean;\n\tframeWidth?: number;\n\tclassName?: string;\n\tisAccessible?: boolean;\n\tisResizeable?: boolean;\n\tframeColor?: Color | string;\n\tarrowColor?: Color;\n\tkeepEditorSelection?: boolean;\n\tordinal?: number;\n\tshowInHiddenAreas?: boolean;\n}\n\nexport interface IStyles {\n\tframeColor?: Color | string | null;\n\tarrowColor?: Color | null;\n}\n\nconst defaultColor = new Color(new RGBA(0, 122, 204));\n\nconst defaultOptions: IOptions = {\n\tshowArrow: true,\n\tshowFrame: true,\n\tclassName: '',\n\tframeColor: defaultColor,\n\tarrowColor: defaultColor,\n\tkeepEditorSelection: false\n};\n\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\n\nclass ViewZoneDelegate implements IViewZone {\n\n\tdomNode: HTMLElement;\n\tid: string = ''; // A valid zone id should be greater than 0\n\tafterLineNumber: number;\n\tafterColumn: number;\n\theightInLines: number;\n\treadonly showInHiddenAreas: boolean | undefined;\n\treadonly ordinal: number | undefined;\n\n\tprivate readonly _onDomNodeTop: (top: number) => void;\n\tprivate readonly _onComputedHeight: (height: number) => void;\n\n\tconstructor(domNode: HTMLElement, afterLineNumber: number, afterColumn: number, heightInLines: number,\n\t\tonDomNodeTop: (top: number) => void,\n\t\tonComputedHeight: (height: number) => void,\n\t\tshowInHiddenAreas: boolean | undefined,\n\t\tordinal: number | undefined\n\t) {\n\t\tthis.domNode = domNode;\n\t\tthis.afterLineNumber = afterLineNumber;\n\t\tthis.afterColumn = afterColumn;\n\t\tthis.heightInLines = heightInLines;\n\t\tthis.showInHiddenAreas = showInHiddenAreas;\n\t\tthis.ordinal = ordinal;\n\t\tthis._onDomNodeTop = onDomNodeTop;\n\t\tthis._onComputedHeight = onComputedHeight;\n\t}\n\n\tonDomNodeTop(top: number): void {\n\t\tthis._onDomNodeTop(top);\n\t}\n\n\tonComputedHeight(height: number): void {\n\t\tthis._onComputedHeight(height);\n\t}\n}\n\nexport class OverlayWidgetDelegate implements IOverlayWidget {\n\n\tprivate readonly _id: string;\n\tprivate readonly _domNode: HTMLElement;\n\n\tconstructor(id: string, domNode: HTMLElement) {\n\t\tthis._id = id;\n\t\tthis._domNode = domNode;\n\t}\n\n\tgetId(): string {\n\t\treturn this._id;\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tgetPosition(): IOverlayWidgetPosition | null {\n\t\treturn null;\n\t}\n}\n\nclass Arrow {\n\n\tprivate static readonly _IdGenerator = new IdGenerator('.arrow-decoration-');\n\n\tprivate readonly _ruleName = Arrow._IdGenerator.nextId();\n\tprivate readonly _decorations: IEditorDecorationsCollection;\n\tprivate _color: string | null = null;\n\tprivate _height: number = -1;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor\n\t) {\n\t\tthis._decorations = this._editor.createDecorationsCollection();\n\t}\n\n\tdispose(): void {\n\t\tthis.hide();\n\t\tdomStylesheetsJs.removeCSSRulesContainingSelector(this._ruleName);\n\t}\n\n\tset color(value: string) {\n\t\tif (this._color !== value) {\n\t\t\tthis._color = value;\n\t\t\tthis._updateStyle();\n\t\t}\n\t}\n\n\tset height(value: number) {\n\t\tif (this._height !== value) {\n\t\t\tthis._height = value;\n\t\t\tthis._updateStyle();\n\t\t}\n\t}\n\n\tprivate _updateStyle(): void {\n\t\tdomStylesheetsJs.removeCSSRulesContainingSelector(this._ruleName);\n\t\tdomStylesheetsJs.createCSSRule(\n\t\t\t`.monaco-editor ${this._ruleName}`,\n\t\t\t`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `\n\t\t);\n\t}\n\n\tshow(where: IPosition): void {\n\n\t\tif (where.column === 1) {\n\t\t\t// the arrow isn't pretty at column 1 and we need to push it out a little\n\t\t\twhere = { lineNumber: where.lineNumber, column: 2 };\n\t\t}\n\n\t\tthis._decorations.set([{\n\t\t\trange: Range.fromPositions(where),\n\t\t\toptions: {\n\t\t\t\tdescription: 'zone-widget-arrow',\n\t\t\t\tclassName: this._ruleName,\n\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t\t\t}\n\t\t}]);\n\t}\n\n\thide(): void {\n\t\tthis._decorations.clear();\n\t}\n}\n\nexport abstract class ZoneWidget implements IHorizontalSashLayoutProvider {\n\n\tprivate _arrow: Arrow | null = null;\n\tprivate _overlayWidget: OverlayWidgetDelegate | null = null;\n\tprivate _resizeSash: Sash | null = null;\n\tprivate _isSashResizeHeight: boolean = false;\n\tprivate readonly _positionMarkerId: IEditorDecorationsCollection;\n\n\tprotected _viewZone: ViewZoneDelegate | null = null;\n\tprotected readonly _disposables = new DisposableStore();\n\n\tcontainer: HTMLElement | null = null;\n\tdomNode: HTMLElement;\n\teditor: ICodeEditor;\n\toptions: IOptions;\n\n\n\tconstructor(editor: ICodeEditor, options: IOptions = {}) {\n\t\tthis.editor = editor;\n\t\tthis._positionMarkerId = this.editor.createDecorationsCollection();\n\t\tthis.options = objects.deepClone(options);\n\t\tobjects.mixin(this.options, defaultOptions, false);\n\t\tthis.domNode = document.createElement('div');\n\t\tif (!this.options.isAccessible) {\n\t\t\tthis.domNode.setAttribute('aria-hidden', 'true');\n\t\t\tthis.domNode.setAttribute('role', 'presentation');\n\t\t}\n\n\t\tthis._disposables.add(this.editor.onDidLayoutChange((info: EditorLayoutInfo) => {\n\t\t\tconst width = this._getWidth(info);\n\t\t\tthis.domNode.style.width = width + 'px';\n\t\t\tthis.domNode.style.left = this._getLeft(info) + 'px';\n\t\t\tthis._onWidth(width);\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tif (this._overlayWidget) {\n\t\t\tthis.editor.removeOverlayWidget(this._overlayWidget);\n\t\t\tthis._overlayWidget = null;\n\t\t}\n\n\t\tif (this._viewZone) {\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\taccessor.removeZone(this._viewZone.id);\n\t\t\t\t}\n\t\t\t\tthis._viewZone = null;\n\t\t\t});\n\t\t}\n\n\t\tthis._positionMarkerId.clear();\n\n\t\tthis._disposables.dispose();\n\t}\n\n\tcreate(): void {\n\n\t\tthis.domNode.classList.add('zone-widget');\n\t\tif (this.options.className) {\n\t\t\tthis.domNode.classList.add(this.options.className);\n\t\t}\n\n\t\tthis.container = document.createElement('div');\n\t\tthis.container.classList.add('zone-widget-container');\n\t\tthis.domNode.appendChild(this.container);\n\t\tif (this.options.showArrow) {\n\t\t\tthis._arrow = new Arrow(this.editor);\n\t\t\tthis._disposables.add(this._arrow);\n\t\t}\n\t\tthis._fillContainer(this.container);\n\t\tthis._initSash();\n\t\tthis._applyStyles();\n\t}\n\n\tstyle(styles: IStyles): void {\n\t\tif (styles.frameColor) {\n\t\t\tthis.options.frameColor = styles.frameColor;\n\t\t}\n\t\tif (styles.arrowColor) {\n\t\t\tthis.options.arrowColor = styles.arrowColor;\n\t\t}\n\t\tthis._applyStyles();\n\t}\n\n\tprotected _applyStyles(): void {\n\t\tif (this.container && this.options.frameColor) {\n\t\t\tconst frameColor = this.options.frameColor.toString();\n\t\t\tthis.container.style.borderTopColor = frameColor;\n\t\t\tthis.container.style.borderBottomColor = frameColor;\n\t\t}\n\t\tif (this._arrow && this.options.arrowColor) {\n\t\t\tconst arrowColor = this.options.arrowColor.toString();\n\t\t\tthis._arrow.color = arrowColor;\n\t\t}\n\t}\n\n\tprotected _getWidth(info: EditorLayoutInfo): number {\n\t\treturn info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n\t}\n\n\tprivate _getLeft(info: EditorLayoutInfo): number {\n\t\t// If minimap is to the left, we move beyond it\n\t\tif (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n\t\t\treturn info.minimap.minimapWidth;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprivate _onViewZoneTop(top: number): void {\n\t\tthis.domNode.style.top = top + 'px';\n\t}\n\n\tprivate _onViewZoneHeight(height: number): void {\n\t\tthis.domNode.style.height = `${height}px`;\n\n\t\tif (this.container) {\n\t\t\tconst containerHeight = height - this._decoratingElementsHeight();\n\t\t\tthis.container.style.height = `${containerHeight}px`;\n\t\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\t\tthis._doLayout(containerHeight, this._getWidth(layoutInfo));\n\t\t}\n\n\t\tthis._resizeSash?.layout();\n\t}\n\n\tget position(): Position | undefined {\n\t\tconst range = this._positionMarkerId.getRange(0);\n\t\tif (!range) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn range.getStartPosition();\n\t}\n\n\tprotected _isShowing: boolean = false;\n\n\tshow(rangeOrPos: IRange | IPosition, heightInLines: number): void {\n\t\tconst range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n\t\tthis._isShowing = true;\n\t\tthis._showImpl(range, heightInLines);\n\t\tthis._isShowing = false;\n\t\tthis._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\n\t}\n\n\thide(): void {\n\t\tif (this._viewZone) {\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\taccessor.removeZone(this._viewZone.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._viewZone = null;\n\t\t}\n\t\tif (this._overlayWidget) {\n\t\t\tthis.editor.removeOverlayWidget(this._overlayWidget);\n\t\t\tthis._overlayWidget = null;\n\t\t}\n\t\tthis._arrow?.hide();\n\t\tthis._positionMarkerId.clear();\n\t\tthis._isSashResizeHeight = false;\n\t}\n\n\tprotected _decoratingElementsHeight(): number {\n\t\tconst lineHeight = this.editor.getOption(EditorOption.lineHeight);\n\t\tlet result = 0;\n\n\t\tif (this.options.showArrow) {\n\t\t\tconst arrowHeight = Math.round(lineHeight / 3);\n\t\t\tresult += 2 * arrowHeight;\n\t\t}\n\n\t\tif (this.options.showFrame) {\n\t\t\tconst frameThickness = this.options.frameWidth ?? Math.round(lineHeight / 9);\n\t\t\tresult += 2 * frameThickness;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/** Gets the maximum widget height in lines. */\n\tprotected _getMaximumHeightInLines(): number | undefined {\n\t\treturn Math.max(12, (this.editor.getLayoutInfo().height / this.editor.getOption(EditorOption.lineHeight)) * 0.8);\n\t}\n\n\tprivate _showImpl(where: Range, heightInLines: number): void {\n\t\tconst position = where.getStartPosition();\n\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\tconst width = this._getWidth(layoutInfo);\n\t\tthis.domNode.style.width = `${width}px`;\n\t\tthis.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n\n\t\t// Render the widget as zone (rendering) and widget (lifecycle)\n\t\tconst viewZoneDomNode = document.createElement('div');\n\t\tviewZoneDomNode.style.overflow = 'hidden';\n\t\tconst lineHeight = this.editor.getOption(EditorOption.lineHeight);\n\n\t\t// adjust heightInLines to viewport\n\t\tconst maxHeightInLines = this._getMaximumHeightInLines();\n\t\tif (maxHeightInLines !== undefined) {\n\t\t\theightInLines = Math.min(heightInLines, maxHeightInLines);\n\t\t}\n\n\t\tlet arrowHeight = 0;\n\t\tlet frameThickness = 0;\n\n\t\t// Render the arrow one 1/3 of an editor line height\n\t\tif (this._arrow && this.options.showArrow) {\n\t\t\tarrowHeight = Math.round(lineHeight / 3);\n\t\t\tthis._arrow.height = arrowHeight;\n\t\t\tthis._arrow.show(position);\n\t\t}\n\n\t\t// Render the frame as 1/9 of an editor line height\n\t\tif (this.options.showFrame) {\n\t\t\tframeThickness = Math.round(lineHeight / 9);\n\t\t}\n\n\t\t// insert zone widget\n\t\tthis.editor.changeViewZones((accessor: IViewZoneChangeAccessor) => {\n\t\t\tif (this._viewZone) {\n\t\t\t\taccessor.removeZone(this._viewZone.id);\n\t\t\t}\n\t\t\tif (this._overlayWidget) {\n\t\t\t\tthis.editor.removeOverlayWidget(this._overlayWidget);\n\t\t\t\tthis._overlayWidget = null;\n\t\t\t}\n\t\t\tthis.domNode.style.top = '-1000px';\n\t\t\tthis._viewZone = new ViewZoneDelegate(\n\t\t\t\tviewZoneDomNode,\n\t\t\t\tposition.lineNumber,\n\t\t\t\tposition.column,\n\t\t\t\theightInLines,\n\t\t\t\t(top: number) => this._onViewZoneTop(top),\n\t\t\t\t(height: number) => this._onViewZoneHeight(height),\n\t\t\t\tthis.options.showInHiddenAreas,\n\t\t\t\tthis.options.ordinal\n\t\t\t);\n\t\t\tthis._viewZone.id = accessor.addZone(this._viewZone);\n\t\t\tthis._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n\t\t\tthis.editor.addOverlayWidget(this._overlayWidget);\n\t\t});\n\t\tthis._updateSashEnablement();\n\n\t\tif (this.container && this.options.showFrame) {\n\t\t\tconst width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n\t\t\tthis.container.style.borderTopWidth = width + 'px';\n\t\t\tthis.container.style.borderBottomWidth = width + 'px';\n\t\t}\n\n\t\tconst containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n\n\t\tif (this.container) {\n\t\t\tthis.container.style.top = arrowHeight + 'px';\n\t\t\tthis.container.style.height = containerHeight + 'px';\n\t\t\tthis.container.style.overflow = 'hidden';\n\t\t}\n\n\t\tthis._doLayout(containerHeight, width);\n\n\t\tif (!this.options.keepEditorSelection) {\n\t\t\tthis.editor.setSelection(where);\n\t\t}\n\n\t\tconst model = this.editor.getModel();\n\t\tif (model) {\n\t\t\tconst range = model.validateRange(new Range(where.startLineNumber, 1, where.endLineNumber + 1, 1));\n\t\t\tthis.revealRange(range, range.startLineNumber === model.getLineCount());\n\t\t}\n\t}\n\n\tprotected revealRange(range: Range, isLastLine: boolean) {\n\t\tif (isLastLine) {\n\t\t\tthis.editor.revealLineNearTop(range.endLineNumber, ScrollType.Smooth);\n\t\t} else {\n\t\t\tthis.editor.revealRange(range, ScrollType.Smooth);\n\t\t}\n\t}\n\n\tprotected setCssClass(className: string, classToReplace?: string): void {\n\t\tif (!this.container) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (classToReplace) {\n\t\t\tthis.container.classList.remove(classToReplace);\n\t\t}\n\n\t\tthis.container.classList.add(className);\n\n\t}\n\n\tprotected abstract _fillContainer(container: HTMLElement): void;\n\n\tprotected _onWidth(widthInPixel: number): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected _doLayout(heightInPixel: number, widthInPixel: number): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected _relayout(_newHeightInLines: number, useMax?: boolean): void {\n\t\tconst maxHeightInLines = this._getMaximumHeightInLines();\n\t\tconst newHeightInLines = (useMax && (maxHeightInLines !== undefined)) ? Math.min(maxHeightInLines, _newHeightInLines) : _newHeightInLines;\n\t\tif (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\tthis._viewZone.heightInLines = newHeightInLines;\n\t\t\t\t\taccessor.layoutZone(this._viewZone.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._updateSashEnablement();\n\t\t}\n\t}\n\n\t// --- sash\n\n\tprivate _initSash(): void {\n\t\tif (this._resizeSash) {\n\t\t\treturn;\n\t\t}\n\t\tthis._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: Orientation.HORIZONTAL }));\n\n\t\tif (!this.options.isResizeable) {\n\t\t\tthis._resizeSash.state = SashState.Disabled;\n\t\t}\n\n\t\tlet data: { startY: number; heightInLines: number; minLines: number; maxLines: number } | undefined;\n\t\tthis._disposables.add(this._resizeSash.onDidStart((e: ISashEvent) => {\n\t\t\tif (this._viewZone) {\n\t\t\t\tdata = {\n\t\t\t\t\tstartY: e.startY,\n\t\t\t\t\theightInLines: this._viewZone.heightInLines,\n\t\t\t\t\t... this._getResizeBounds()\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tthis._disposables.add(this._resizeSash.onDidEnd(() => {\n\t\t\tdata = undefined;\n\t\t}));\n\n\t\tthis._disposables.add(this._resizeSash.onDidChange((evt: ISashEvent) => {\n\t\t\tif (data) {\n\t\t\t\tconst lineDelta = (evt.currentY - data.startY) / this.editor.getOption(EditorOption.lineHeight);\n\t\t\t\tconst roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n\t\t\t\tconst newHeightInLines = data.heightInLines + roundedLineDelta;\n\n\t\t\t\tif (newHeightInLines > data.minLines && newHeightInLines < data.maxLines) {\n\t\t\t\t\tthis._isSashResizeHeight = true;\n\t\t\t\t\tthis._relayout(newHeightInLines);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _updateSashEnablement(): void {\n\t\tif (this._resizeSash) {\n\t\t\tconst { minLines, maxLines } = this._getResizeBounds();\n\t\t\tthis._resizeSash.state = minLines === maxLines ? SashState.Disabled : SashState.Enabled;\n\t\t}\n\t}\n\n\tprotected _getResizeBounds(): { readonly minLines: number; readonly maxLines: number } {\n\t\treturn { minLines: 5, maxLines: 35 };\n\t}\n\n\tgetHorizontalSashLeft() {\n\t\treturn 0;\n\t}\n\n\tgetHorizontalSashTop() {\n\t\treturn (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\n\t}\n\n\tgetHorizontalSashWidth() {\n\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\treturn layoutInfo.width - layoutInfo.minimap.minimapWidth;\n\t}\n}\n","\nimport * as domStylesheetsJs from '../../../../base/browser/domStylesheets.js';\nimport { IHorizontalSashLayoutProvider, ISashEvent, Orientation, Sash, SashState } from '../../../../base/browser/ui/sash/sash.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { IdGenerator } from '../../../../base/common/idGenerator.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './zoneWidget.css';\nimport { ICodeEditor, IOverlayWidget, IOverlayWidgetPosition, IViewZone, IViewZoneChangeAccessor } from '../../../browser/editorBrowser.js';\nimport { EditorLayoutInfo, EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition, Position } from '../../../common/core/position.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { IEditorDecorationsCollection, ScrollType } from '../../../common/editorCommon.js';\nimport { TrackedRangeStickiness } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\n\nexport interface IOptions {\n\tshowFrame?: boolean;\n\tshowArrow?: boolean;\n\tframeWidth?: number;\n\tclassName?: string;\n\tisAccessible?: boolean;\n\tisResizeable?: boolean;\n\tframeColor?: Color | string;\n\tarrowColor?: Color;\n\tkeepEditorSelection?: boolean;\n\tordinal?: number;\n\tshowInHiddenAreas?: boolean;\n}\n\nexport interface IStyles {\n\tframeColor?: Color | string | null;\n\tarrowColor?: Color | null;\n}\n\nconst defaultColor = new Color(new RGBA(0, 122, 204));\n\nconst defaultOptions: IOptions = {\n\tshowArrow: true,\n\tshowFrame: true,\n\tclassName: '',\n\tframeColor: defaultColor,\n\tarrowColor: defaultColor,\n\tkeepEditorSelection: false\n};\n\nconst WIDGET_ID = 'vs.editor.contrib.zoneWidget';\n\nclass ViewZoneDelegate implements IViewZone {\n\n\tdomNode: HTMLElement;\n\tid: string = ''; // A valid zone id should be greater than 0\n\tafterLineNumber: number;\n\tafterColumn: number;\n\theightInLines: number;\n\treadonly showInHiddenAreas: boolean | undefined;\n\treadonly ordinal: number | undefined;\n\n\tprivate readonly _onDomNodeTop: (top: number) => void;\n\tprivate readonly _onComputedHeight: (height: number) => void;\n\n\tconstructor(domNode: HTMLElement, afterLineNumber: number, afterColumn: number, heightInLines: number,\n\t\tonDomNodeTop: (top: number) => void,\n\t\tonComputedHeight: (height: number) => void,\n\t\tshowInHiddenAreas: boolean | undefined,\n\t\tordinal: number | undefined\n\t) {\n\t\tthis.domNode = domNode;\n\t\tthis.afterLineNumber = afterLineNumber;\n\t\tthis.afterColumn = afterColumn;\n\t\tthis.heightInLines = heightInLines;\n\t\tthis.showInHiddenAreas = showInHiddenAreas;\n\t\tthis.ordinal = ordinal;\n\t\tthis._onDomNodeTop = onDomNodeTop;\n\t\tthis._onComputedHeight = onComputedHeight;\n\t}\n\n\tonDomNodeTop(top: number): void {\n\t\tthis._onDomNodeTop(top);\n\t}\n\n\tonComputedHeight(height: number): void {\n\t\tthis._onComputedHeight(height);\n\t}\n}\n\nexport class OverlayWidgetDelegate implements IOverlayWidget {\n\n\tprivate readonly _id: string;\n\tprivate readonly _domNode: HTMLElement;\n\n\tconstructor(id: string, domNode: HTMLElement) {\n\t\tthis._id = id;\n\t\tthis._domNode = domNode;\n\t}\n\n\tgetId(): string {\n\t\treturn this._id;\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tgetPosition(): IOverlayWidgetPosition | null {\n\t\treturn null;\n\t}\n}\n\nclass Arrow {\n\n\tprivate static readonly _IdGenerator = new IdGenerator('.arrow-decoration-');\n\n\tprivate readonly _ruleName = Arrow._IdGenerator.nextId();\n\tprivate readonly _decorations: IEditorDecorationsCollection;\n\tprivate _color: string | null = null;\n\tprivate _height: number = -1;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor\n\t) {\n\t\tthis._decorations = this._editor.createDecorationsCollection();\n\t}\n\n\tdispose(): void {\n\t\tthis.hide();\n\t\tdomStylesheetsJs.removeCSSRulesContainingSelector(this._ruleName);\n\t}\n\n\tset color(value: string) {\n\t\tif (this._color !== value) {\n\t\t\tthis._color = value;\n\t\t\tthis._updateStyle();\n\t\t}\n\t}\n\n\tset height(value: number) {\n\t\tif (this._height !== value) {\n\t\t\tthis._height = value;\n\t\t\tthis._updateStyle();\n\t\t}\n\t}\n\n\tprivate _updateStyle(): void {\n\t\tdomStylesheetsJs.removeCSSRulesContainingSelector(this._ruleName);\n\t\tdomStylesheetsJs.createCSSRule(\n\t\t\t`.monaco-editor ${this._ruleName}`,\n\t\t\t`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `\n\t\t);\n\t}\n\n\tshow(where: IPosition): void {\n\n\t\tif (where.column === 1) {\n\t\t\t// the arrow isn't pretty at column 1 and we need to push it out a little\n\t\t\twhere = { lineNumber: where.lineNumber, column: 2 };\n\t\t}\n\n\t\tthis._decorations.set([{\n\t\t\trange: Range.fromPositions(where),\n\t\t\toptions: {\n\t\t\t\tdescription: 'zone-widget-arrow',\n\t\t\t\tclassName: this._ruleName,\n\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t\t\t}\n\t\t}]);\n\t}\n\n\thide(): void {\n\t\tthis._decorations.clear();\n\t}\n}\n\nexport abstract class ZoneWidget implements IHorizontalSashLayoutProvider {\n\n\tprivate _arrow: Arrow | null = null;\n\tprivate _overlayWidget: OverlayWidgetDelegate | null = null;\n\tprivate _resizeSash: Sash | null = null;\n\tprivate _isSashResizeHeight: boolean = false;\n\tprivate readonly _positionMarkerId: IEditorDecorationsCollection;\n\n\tprotected _viewZone: ViewZoneDelegate | null = null;\n\tprotected readonly _disposables = new DisposableStore();\n\n\tcontainer: HTMLElement | null = null;\n\tdomNode: HTMLElement;\n\teditor: ICodeEditor;\n\toptions: IOptions;\n\n\n\tconstructor(editor: ICodeEditor, options: IOptions = {}) {\n\t\tthis.editor = editor;\n\t\tthis._positionMarkerId = this.editor.createDecorationsCollection();\n\t\tthis.options = objects.deepClone(options);\n\t\tobjects.mixin(this.options, defaultOptions, false);\n\t\tthis.domNode = document.createElement('div');\n\t\tif (!this.options.isAccessible) {\n\t\t\tthis.domNode.setAttribute('aria-hidden', 'true');\n\t\t\tthis.domNode.setAttribute('role', 'presentation');\n\t\t}\n\n\t\tthis._disposables.add(this.editor.onDidLayoutChange((info: EditorLayoutInfo) => {\n\t\t\tconst width = this._getWidth(info);\n\t\t\tthis.domNode.style.width = width + 'px';\n\t\t\tthis.domNode.style.left = this._getLeft(info) + 'px';\n\t\t\tthis._onWidth(width);\n\t\t}));\n\t}\n\n\tdispose(): void {\n\t\tif (this._overlayWidget) {\n\t\t\tthis.editor.removeOverlayWidget(this._overlayWidget);\n\t\t\tthis._overlayWidget = null;\n\t\t}\n\n\t\tif (this._viewZone) {\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\taccessor.removeZone(this._viewZone.id);\n\t\t\t\t}\n\t\t\t\tthis._viewZone = null;\n\t\t\t});\n\t\t}\n\n\t\tthis._positionMarkerId.clear();\n\n\t\tthis._disposables.dispose();\n\t}\n\n\tcreate(): void {\n\n\t\tthis.domNode.classList.add('zone-widget');\n\t\tif (this.options.className) {\n\t\t\tthis.domNode.classList.add(this.options.className);\n\t\t}\n\n\t\tthis.container = document.createElement('div');\n\t\tthis.container.classList.add('zone-widget-container');\n\t\tthis.domNode.appendChild(this.container);\n\t\tif (this.options.showArrow) {\n\t\t\tthis._arrow = new Arrow(this.editor);\n\t\t\tthis._disposables.add(this._arrow);\n\t\t}\n\t\tthis._fillContainer(this.container);\n\t\tthis._initSash();\n\t\tthis._applyStyles();\n\t}\n\n\tstyle(styles: IStyles): void {\n\t\tif (styles.frameColor) {\n\t\t\tthis.options.frameColor = styles.frameColor;\n\t\t}\n\t\tif (styles.arrowColor) {\n\t\t\tthis.options.arrowColor = styles.arrowColor;\n\t\t}\n\t\tthis._applyStyles();\n\t}\n\n\tprotected _applyStyles(): void {\n\t\tif (this.container && this.options.frameColor) {\n\t\t\tconst frameColor = this.options.frameColor.toString();\n\t\t\tthis.container.style.borderTopColor = frameColor;\n\t\t\tthis.container.style.borderBottomColor = frameColor;\n\t\t}\n\t\tif (this._arrow && this.options.arrowColor) {\n\t\t\tconst arrowColor = this.options.arrowColor.toString();\n\t\t\tthis._arrow.color = arrowColor;\n\t\t}\n\t}\n\n\tprotected _getWidth(info: EditorLayoutInfo): number {\n\t\treturn info.width - info.minimap.minimapWidth - info.verticalScrollbarWidth;\n\t}\n\n\tprivate _getLeft(info: EditorLayoutInfo): number {\n\t\t// If minimap is to the left, we move beyond it\n\t\tif (info.minimap.minimapWidth > 0 && info.minimap.minimapLeft === 0) {\n\t\t\treturn info.minimap.minimapWidth;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tprivate _onViewZoneTop(top: number): void {\n\t\tthis.domNode.style.top = top + 'px';\n\t}\n\n\tprivate _onViewZoneHeight(height: number): void {\n\t\tthis.domNode.style.height = `${height}px`;\n\n\t\tif (this.container) {\n\t\t\tconst containerHeight = height - this._decoratingElementsHeight();\n\t\t\tthis.container.style.height = `${containerHeight}px`;\n\t\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\t\tthis._doLayout(containerHeight, this._getWidth(layoutInfo));\n\t\t}\n\n\t\tthis._resizeSash?.layout();\n\t}\n\n\tget position(): Position | undefined {\n\t\tconst range = this._positionMarkerId.getRange(0);\n\t\tif (!range) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn range.getStartPosition();\n\t}\n\n\tprotected _isShowing: boolean = false;\n\n\tshow(rangeOrPos: IRange | IPosition, heightInLines: number): void {\n\t\tconst range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\n\t\tthis._isShowing = true;\n\t\tthis._showImpl(range, heightInLines);\n\t\tthis._isShowing = false;\n\t\tthis._positionMarkerId.set([{ range, options: ModelDecorationOptions.EMPTY }]);\n\t}\n\n\thide(): void {\n\t\tif (this._viewZone) {\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\taccessor.removeZone(this._viewZone.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._viewZone = null;\n\t\t}\n\t\tif (this._overlayWidget) {\n\t\t\tthis.editor.removeOverlayWidget(this._overlayWidget);\n\t\t\tthis._overlayWidget = null;\n\t\t}\n\t\tthis._arrow?.hide();\n\t\tthis._positionMarkerId.clear();\n\t\tthis._isSashResizeHeight = false;\n\t}\n\n\tprotected _decoratingElementsHeight(): number {\n\t\tconst lineHeight = this.editor.getOption(EditorOption.lineHeight);\n\t\tlet result = 0;\n\n\t\tif (this.options.showArrow) {\n\t\t\tconst arrowHeight = Math.round(lineHeight / 3);\n\t\t\tresult += 2 * arrowHeight;\n\t\t}\n\n\t\tif (this.options.showFrame) {\n\t\t\tconst frameThickness = this.options.frameWidth ?? Math.round(lineHeight / 9);\n\t\t\tresult += 2 * frameThickness;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/** Gets the maximum widget height in lines. */\n\tprotected _getMaximumHeightInLines(): number | undefined {\n\t\treturn Math.max(12, (this.editor.getLayoutInfo().height / this.editor.getOption(EditorOption.lineHeight)) * 0.8);\n\t}\n\n\tprivate _showImpl(where: Range, heightInLines: number): void {\n\t\tconst position = where.getStartPosition();\n\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\tconst width = this._getWidth(layoutInfo);\n\t\tthis.domNode.style.width = `${width}px`;\n\t\tthis.domNode.style.left = this._getLeft(layoutInfo) + 'px';\n\n\t\t// Render the widget as zone (rendering) and widget (lifecycle)\n\t\tconst viewZoneDomNode = document.createElement('div');\n\t\tviewZoneDomNode.style.overflow = 'hidden';\n\t\tconst lineHeight = this.editor.getOption(EditorOption.lineHeight);\n\n\t\t// adjust heightInLines to viewport\n\t\tconst maxHeightInLines = this._getMaximumHeightInLines();\n\t\tif (maxHeightInLines !== undefined) {\n\t\t\theightInLines = Math.min(heightInLines, maxHeightInLines);\n\t\t}\n\n\t\tlet arrowHeight = 0;\n\t\tlet frameThickness = 0;\n\n\t\t// Render the arrow one 1/3 of an editor line height\n\t\tif (this._arrow && this.options.showArrow) {\n\t\t\tarrowHeight = Math.round(lineHeight / 3);\n\t\t\tthis._arrow.height = arrowHeight;\n\t\t\tthis._arrow.show(position);\n\t\t}\n\n\t\t// Render the frame as 1/9 of an editor line height\n\t\tif (this.options.showFrame) {\n\t\t\tframeThickness = Math.round(lineHeight / 9);\n\t\t}\n\n\t\t// insert zone widget\n\t\tthis.editor.changeViewZones((accessor: IViewZoneChangeAccessor) => {\n\t\t\tif (this._viewZone) {\n\t\t\t\taccessor.removeZone(this._viewZone.id);\n\t\t\t}\n\t\t\tif (this._overlayWidget) {\n\t\t\t\tthis.editor.removeOverlayWidget(this._overlayWidget);\n\t\t\t\tthis._overlayWidget = null;\n\t\t\t}\n\t\t\tthis.domNode.style.top = '-1000px';\n\t\t\tthis._viewZone = new ViewZoneDelegate(\n\t\t\t\tviewZoneDomNode,\n\t\t\t\tposition.lineNumber,\n\t\t\t\tposition.column,\n\t\t\t\theightInLines,\n\t\t\t\t(top: number) => this._onViewZoneTop(top),\n\t\t\t\t(height: number) => this._onViewZoneHeight(height),\n\t\t\t\tthis.options.showInHiddenAreas,\n\t\t\t\tthis.options.ordinal\n\t\t\t);\n\t\t\tthis._viewZone.id = accessor.addZone(this._viewZone);\n\t\t\tthis._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + this._viewZone.id, this.domNode);\n\t\t\tthis.editor.addOverlayWidget(this._overlayWidget);\n\t\t});\n\t\tthis._updateSashEnablement();\n\n\t\tif (this.container && this.options.showFrame) {\n\t\t\tconst width = this.options.frameWidth ? this.options.frameWidth : frameThickness;\n\t\t\tthis.container.style.borderTopWidth = width + 'px';\n\t\t\tthis.container.style.borderBottomWidth = width + 'px';\n\t\t}\n\n\t\tconst containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\n\n\t\tif (this.container) {\n\t\t\tthis.container.style.top = arrowHeight + 'px';\n\t\t\tthis.container.style.height = containerHeight + 'px';\n\t\t\tthis.container.style.overflow = 'hidden';\n\t\t}\n\n\t\tthis._doLayout(containerHeight, width);\n\n\t\tif (!this.options.keepEditorSelection) {\n\t\t\tthis.editor.setSelection(where);\n\t\t}\n\n\t\tconst model = this.editor.getModel();\n\t\tif (model) {\n\t\t\tconst range = model.validateRange(new Range(where.startLineNumber, 1, where.endLineNumber + 1, 1));\n\t\t\tthis.revealRange(range, range.startLineNumber === model.getLineCount());\n\t\t}\n\t}\n\n\tprotected revealRange(range: Range, isLastLine: boolean) {\n\t\tif (isLastLine) {\n\t\t\tthis.editor.revealLineNearTop(range.endLineNumber, ScrollType.Smooth);\n\t\t} else {\n\t\t\tthis.editor.revealRange(range, ScrollType.Smooth);\n\t\t}\n\t}\n\n\tprotected setCssClass(className: string, classToReplace?: string): void {\n\t\tif (!this.container) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (classToReplace) {\n\t\t\tthis.container.classList.remove(classToReplace);\n\t\t}\n\n\t\tthis.container.classList.add(className);\n\n\t}\n\n\tprotected abstract _fillContainer(container: HTMLElement): void;\n\n\tprotected _onWidth(widthInPixel: number): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected _doLayout(heightInPixel: number, widthInPixel: number): void {\n\t\t// implement in subclass\n\t}\n\n\tprotected _relayout(_newHeightInLines: number, useMax?: boolean): void {\n\t\tconst maxHeightInLines = this._getMaximumHeightInLines();\n\t\tconst newHeightInLines = (useMax && (maxHeightInLines !== undefined)) ? Math.min(maxHeightInLines, _newHeightInLines) : _newHeightInLines;\n\t\tif (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\n\t\t\tthis.editor.changeViewZones(accessor => {\n\t\t\t\tif (this._viewZone) {\n\t\t\t\t\tthis._viewZone.heightInLines = newHeightInLines;\n\t\t\t\t\taccessor.layoutZone(this._viewZone.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis._updateSashEnablement();\n\t\t}\n\t}\n\n\t// --- sash\n\n\tprivate _initSash(): void {\n\t\tif (this._resizeSash) {\n\t\t\treturn;\n\t\t}\n\t\tthis._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: Orientation.HORIZONTAL }));\n\n\t\tif (!this.options.isResizeable) {\n\t\t\tthis._resizeSash.state = SashState.Disabled;\n\t\t}\n\n\t\tlet data: { startY: number; heightInLines: number; minLines: number; maxLines: number } | undefined;\n\t\tthis._disposables.add(this._resizeSash.onDidStart((e: ISashEvent) => {\n\t\t\tif (this._viewZone) {\n\t\t\t\tdata = {\n\t\t\t\t\tstartY: e.startY,\n\t\t\t\t\theightInLines: this._viewZone.heightInLines,\n\t\t\t\t\t... this._getResizeBounds()\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\n\t\tthis._disposables.add(this._resizeSash.onDidEnd(() => {\n\t\t\tdata = undefined;\n\t\t}));\n\n\t\tthis._disposables.add(this._resizeSash.onDidChange((evt: ISashEvent) => {\n\t\t\tif (data) {\n\t\t\t\tconst lineDelta = (evt.currentY - data.startY) / this.editor.getOption(EditorOption.lineHeight);\n\t\t\t\tconst roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\n\t\t\t\tconst newHeightInLines = data.heightInLines + roundedLineDelta;\n\n\t\t\t\tif (newHeightInLines > data.minLines && newHeightInLines < data.maxLines) {\n\t\t\t\t\tthis._isSashResizeHeight = true;\n\t\t\t\t\tthis._relayout(newHeightInLines);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _updateSashEnablement(): void {\n\t\tif (this._resizeSash) {\n\t\t\tconst { minLines, maxLines } = this._getResizeBounds();\n\t\t\tthis._resizeSash.state = minLines === maxLines ? SashState.Disabled : SashState.Enabled;\n\t\t}\n\t}\n\n\tprotected _getResizeBounds(): { readonly minLines: number; readonly maxLines: number } {\n\t\treturn { minLines: 5, maxLines: 35 };\n\t}\n\n\tgetHorizontalSashLeft() {\n\t\treturn 0;\n\t}\n\n\tgetHorizontalSashTop() {\n\t\treturn (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\n\t}\n\n\tgetHorizontalSashWidth() {\n\t\tconst layoutInfo = this.editor.getLayoutInfo();\n\t\treturn layoutInfo.width - layoutInfo.minimap.minimapWidth;\n\t}\n}\n"]}