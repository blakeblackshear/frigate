{"version":3,"sources":["vs/editor/contrib/codeAction/browser/lightBulbWidget.ts"],"names":[],"mappings":"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","file":"lightBulbWidget.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './lightBulbWidget.css';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition, IEditorMouseEvent } from '../../../browser/editorBrowser.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition } from '../../../common/core/position.js';\nimport { GlyphMarginLane, IModelDecorationsChangeAccessor, TrackedRangeStickiness } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\nimport { CodeActionSet, CodeActionTrigger } from '../common/types.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { Range } from '../../../common/core/range.js';\n\nconst GUTTER_LIGHTBULB_ICON = registerIcon('gutter-lightbulb', Codicon.lightBulb, nls.localize('gutterLightbulbWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor.'));\nconst GUTTER_LIGHTBULB_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-auto-fix', Codicon.lightbulbAutofix, nls.localize('gutterLightbulbAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_ICON = registerIcon('gutter-lightbulb-sparkle', Codicon.lightbulbSparkle, nls.localize('gutterLightbulbAIFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.'));\nconst GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON = registerIcon('gutter-lightbulb-aifix-auto-fix', Codicon.lightbulbSparkleAutofix, nls.localize('gutterLightbulbAIFixAutoFixWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\nconst GUTTER_SPARKLE_FILLED_ICON = registerIcon('gutter-lightbulb-sparkle-filled', Codicon.sparkleFilled, nls.localize('gutterLightbulbSparkleFilledWidget', 'Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.'));\n\nnamespace LightBulbState {\n\n\texport const enum Type {\n\t\tHidden,\n\t\tShowing,\n\t}\n\n\texport const Hidden = { type: Type.Hidden } as const;\n\n\texport class Showing {\n\t\treadonly type = Type.Showing;\n\n\t\tconstructor(\n\t\t\tpublic readonly actions: CodeActionSet,\n\t\t\tpublic readonly trigger: CodeActionTrigger,\n\t\t\tpublic readonly editorPosition: IPosition,\n\t\t\tpublic readonly widgetPosition: IContentWidgetPosition,\n\t\t) { }\n\t}\n\n\texport type State = typeof Hidden | Showing;\n}\n\nexport class LightBulbWidget extends Disposable implements IContentWidget {\n\tprivate _gutterDecorationID: string | undefined;\n\n\tprivate static readonly GUTTER_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'codicon-gutter-lightbulb-decoration',\n\t\tglyphMarginClassName: ThemeIcon.asClassName(Codicon.lightBulb),\n\t\tglyphMargin: { position: GlyphMarginLane.Left },\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t});\n\n\tpublic static readonly ID = 'editor.contrib.lightbulbWidget';\n\n\tprivate static readonly _posPref = [ContentWidgetPositionPreference.EXACT];\n\n\tprivate readonly _domNode: HTMLElement;\n\n\tprivate readonly _onClick = this._register(new Emitter<{ readonly x: number; readonly y: number; readonly actions: CodeActionSet; readonly trigger: CodeActionTrigger }>());\n\tpublic readonly onClick = this._onClick.event;\n\n\tprivate _state: LightBulbState.State = LightBulbState.Hidden;\n\tprivate _gutterState: LightBulbState.State = LightBulbState.Hidden;\n\tprivate _iconClasses: string[] = [];\n\n\tprivate readonly lightbulbClasses = [\n\t\t'codicon-' + GUTTER_LIGHTBULB_ICON.id,\n\t\t'codicon-' + GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON.id,\n\t\t'codicon-' + GUTTER_LIGHTBULB_AUTO_FIX_ICON.id,\n\t\t'codicon-' + GUTTER_LIGHTBULB_AIFIX_ICON.id,\n\t\t'codicon-' + GUTTER_SPARKLE_FILLED_ICON.id\n\t];\n\n\tprivate _preferredKbLabel?: string;\n\tprivate _quickFixKbLabel?: string;\n\n\tprivate gutterDecoration: ModelDecorationOptions = LightBulbWidget.GUTTER_DECORATION;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\n\t\tthis._domNode = dom.$('div.lightBulbWidget');\n\t\tthis._domNode.role = 'listbox';\n\t\tthis._register(Gesture.ignoreTarget(this._domNode));\n\n\t\tthis._editor.addContentWidget(this);\n\n\t\tthis._register(this._editor.onDidChangeModelContent(_ => {\n\t\t\t// cancel when the line in question has been removed\n\t\t\tconst editorModel = this._editor.getModel();\n\t\t\tif (this.state.type !== LightBulbState.Type.Showing || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\n\t\t\tif (this.gutterState.type !== LightBulbState.Type.Showing || !editorModel || this.gutterState.editorPosition.lineNumber >= editorModel.getLineCount()) {\n\t\t\t\tthis.gutterHide();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n\t\t\tif (this.state.type !== LightBulbState.Type.Showing) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure that focus / cursor location is not lost when clicking widget icon\n\t\t\tthis._editor.focus();\n\t\t\te.preventDefault();\n\n\t\t\t// a bit of extra work to make sure the menu\n\t\t\t// doesn't cover the line-text\n\t\t\tconst { top, height } = dom.getDomNodePagePosition(this._domNode);\n\t\t\tconst lineHeight = this._editor.getOption(EditorOption.lineHeight);\n\n\t\t\tlet pad = Math.floor(lineHeight / 3);\n\t\t\tif (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n\t\t\t\tpad += lineHeight;\n\t\t\t}\n\n\t\t\tthis._onClick.fire({\n\t\t\t\tx: e.posx,\n\t\t\t\ty: top + height + pad,\n\t\t\t\tactions: this.state.actions,\n\t\t\t\ttrigger: this.state.trigger,\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e: MouseEvent) => {\n\t\t\tif ((e.buttons & 1) !== 1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// mouse enters lightbulb while the primary/left button\n\t\t\t// is being pressed -> hide the lightbulb\n\t\t\tthis.hide();\n\t\t}));\n\n\n\t\tthis._register(Event.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings, () => {\n\t\t\tthis._preferredKbLabel = this._keybindingService.lookupKeybinding(autoFixCommandId)?.getLabel() ?? undefined;\n\t\t\tthis._quickFixKbLabel = this._keybindingService.lookupKeybinding(quickFixCommandId)?.getLabel() ?? undefined;\n\t\t\tthis._updateLightBulbTitleAndIcon();\n\t\t}));\n\n\t\tthis._register(this._editor.onMouseDown(async (e: IEditorMouseEvent) => {\n\n\t\t\tif (!e.target.element || !this.lightbulbClasses.some(cls => e.target.element && e.target.element.classList.contains(cls))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.gutterState.type !== LightBulbState.Type.Showing) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure that focus / cursor location is not lost when clicking widget icon\n\t\t\tthis._editor.focus();\n\n\t\t\t// a bit of extra work to make sure the menu\n\t\t\t// doesn't cover the line-text\n\t\t\tconst { top, height } = dom.getDomNodePagePosition(e.target.element);\n\t\t\tconst lineHeight = this._editor.getOption(EditorOption.lineHeight);\n\n\t\t\tlet pad = Math.floor(lineHeight / 3);\n\t\t\tif (this.gutterState.widgetPosition.position !== null && this.gutterState.widgetPosition.position.lineNumber < this.gutterState.editorPosition.lineNumber) {\n\t\t\t\tpad += lineHeight;\n\t\t\t}\n\n\t\t\tthis._onClick.fire({\n\t\t\t\tx: e.event.posx,\n\t\t\t\ty: top + height + pad,\n\t\t\t\tactions: this.gutterState.actions,\n\t\t\t\ttrigger: this.gutterState.trigger,\n\t\t\t});\n\t\t}));\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._editor.removeContentWidget(this);\n\t\tif (this._gutterDecorationID) {\n\t\t\tthis._removeGutterDecoration(this._gutterDecorationID);\n\t\t}\n\t}\n\n\tgetId(): string {\n\t\treturn 'LightBulbWidget';\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn this._state.type === LightBulbState.Type.Showing ? this._state.widgetPosition : null;\n\t}\n\n\tpublic update(actions: CodeActionSet, trigger: CodeActionTrigger, atPosition: IPosition) {\n\t\tif (actions.validActions.length <= 0) {\n\t\t\tthis.gutterHide();\n\t\t\treturn this.hide();\n\t\t}\n\n\t\tconst hasTextFocus = this._editor.hasTextFocus();\n\t\tif (!hasTextFocus) {\n\t\t\tthis.gutterHide();\n\t\t\treturn this.hide();\n\t\t}\n\n\t\tconst options = this._editor.getOptions();\n\t\tif (!options.get(EditorOption.lightbulb).enabled) {\n\t\t\tthis.gutterHide();\n\t\t\treturn this.hide();\n\t\t}\n\n\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\tthis.gutterHide();\n\t\t\treturn this.hide();\n\t\t}\n\n\t\tconst { lineNumber, column } = model.validatePosition(atPosition);\n\n\t\tconst tabSize = model.getOptions().tabSize;\n\t\tconst fontInfo = this._editor.getOptions().get(EditorOption.fontInfo);\n\t\tconst lineContent = model.getLineContent(lineNumber);\n\t\tconst indent = computeIndentLevel(lineContent, tabSize);\n\t\tconst lineHasSpace = fontInfo.spaceWidth * indent > 22;\n\t\tconst isFolded = (lineNumber: number) => {\n\t\t\treturn lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n\t\t};\n\n\t\t// Check for glyph margin decorations of any kind\n\t\tconst currLineDecorations = this._editor.getLineDecorations(lineNumber);\n\t\tlet hasDecoration = false;\n\t\tif (currLineDecorations) {\n\t\t\tfor (const decoration of currLineDecorations) {\n\t\t\t\tconst glyphClass = decoration.options.glyphMarginClassName;\n\n\t\t\t\tif (glyphClass && !this.lightbulbClasses.some(className => glyphClass.includes(className))) {\n\t\t\t\t\thasDecoration = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet effectiveLineNumber = lineNumber;\n\t\tlet effectiveColumnNumber = 1;\n\t\tif (!lineHasSpace) {\n\t\t\t// Checks if line is empty or starts with any amount of whitespace\n\t\t\tconst isLineEmptyOrIndented = (lineNumber: number): boolean => {\n\t\t\t\tconst lineContent = model.getLineContent(lineNumber);\n\t\t\t\treturn /^\\s*$|^\\s+/.test(lineContent) || lineContent.length <= effectiveColumnNumber;\n\t\t\t};\n\n\t\t\tif (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n\t\t\t\tconst lineCount = model.getLineCount();\n\t\t\t\tconst endLine = lineNumber === lineCount;\n\t\t\t\tconst prevLineEmptyOrIndented = lineNumber > 1 && isLineEmptyOrIndented(lineNumber - 1);\n\t\t\t\tconst nextLineEmptyOrIndented = !endLine && isLineEmptyOrIndented(lineNumber + 1);\n\t\t\t\tconst currLineEmptyOrIndented = isLineEmptyOrIndented(lineNumber);\n\t\t\t\tconst notEmpty = !nextLineEmptyOrIndented && !prevLineEmptyOrIndented;\n\n\t\t\t\t// check above and below. if both are blocked, display lightbulb in the gutter.\n\t\t\t\tif (!nextLineEmptyOrIndented && !prevLineEmptyOrIndented && !hasDecoration) {\n\t\t\t\t\tthis.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n\t\t\t\t\t\tposition: { lineNumber: effectiveLineNumber, column: effectiveColumnNumber },\n\t\t\t\t\t\tpreference: LightBulbWidget._posPref\n\t\t\t\t\t});\n\t\t\t\t\tthis.renderGutterLightbub();\n\t\t\t\t\treturn this.hide();\n\t\t\t\t} else if (prevLineEmptyOrIndented || endLine || (prevLineEmptyOrIndented && !currLineEmptyOrIndented)) {\n\t\t\t\t\teffectiveLineNumber -= 1;\n\t\t\t\t} else if (nextLineEmptyOrIndented || (notEmpty && currLineEmptyOrIndented)) {\n\t\t\t\t\teffectiveLineNumber += 1;\n\t\t\t\t}\n\t\t\t} else if (lineNumber === 1 && (lineNumber === model.getLineCount() || !isLineEmptyOrIndented(lineNumber + 1) && !isLineEmptyOrIndented(lineNumber))) {\n\t\t\t\t// special checks for first line blocked vs. not blocked.\n\t\t\t\tthis.gutterState = new LightBulbState.Showing(actions, trigger, atPosition, {\n\t\t\t\t\tposition: { lineNumber: effectiveLineNumber, column: effectiveColumnNumber },\n\t\t\t\t\tpreference: LightBulbWidget._posPref\n\t\t\t\t});\n\n\t\t\t\tif (hasDecoration) {\n\t\t\t\t\tthis.gutterHide();\n\t\t\t\t} else {\n\t\t\t\t\tthis.renderGutterLightbub();\n\t\t\t\t\treturn this.hide();\n\t\t\t\t}\n\t\t\t} else if ((lineNumber < model.getLineCount()) && !isFolded(lineNumber + 1)) {\n\t\t\t\teffectiveLineNumber += 1;\n\t\t\t} else if (column * fontInfo.spaceWidth < 22) {\n\t\t\t\t// cannot show lightbulb above/below and showing\n\t\t\t\t// it inline would overlay the cursor...\n\t\t\t\treturn this.hide();\n\t\t\t}\n\t\t\teffectiveColumnNumber = /^\\S\\s*$/.test(model.getLineContent(effectiveLineNumber)) ? 2 : 1;\n\t\t}\n\n\t\tthis.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n\t\t\tposition: { lineNumber: effectiveLineNumber, column: effectiveColumnNumber },\n\t\t\tpreference: LightBulbWidget._posPref\n\t\t});\n\n\t\tif (this._gutterDecorationID) {\n\t\t\tthis._removeGutterDecoration(this._gutterDecorationID);\n\t\t\tthis.gutterHide();\n\t\t}\n\n\t\tconst validActions = actions.validActions;\n\t\tconst actionKind = actions.validActions[0].action.kind;\n\t\tif (validActions.length !== 1 || !actionKind) {\n\t\t\tthis._editor.layoutContentWidget(this);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._editor.layoutContentWidget(this);\n\t}\n\n\tpublic hide(): void {\n\t\tif (this.state === LightBulbState.Hidden) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state = LightBulbState.Hidden;\n\t\tthis._editor.layoutContentWidget(this);\n\t}\n\n\tpublic gutterHide(): void {\n\t\tif (this.gutterState === LightBulbState.Hidden) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._gutterDecorationID) {\n\t\t\tthis._removeGutterDecoration(this._gutterDecorationID);\n\t\t}\n\n\t\tthis.gutterState = LightBulbState.Hidden;\n\t}\n\n\tprivate get state(): LightBulbState.State { return this._state; }\n\n\tprivate set state(value) {\n\t\tthis._state = value;\n\t\tthis._updateLightBulbTitleAndIcon();\n\t}\n\n\tprivate get gutterState(): LightBulbState.State { return this._gutterState; }\n\n\tprivate set gutterState(value) {\n\t\tthis._gutterState = value;\n\t\tthis._updateGutterLightBulbTitleAndIcon();\n\t}\n\n\tprivate _updateLightBulbTitleAndIcon(): void {\n\t\tthis._domNode.classList.remove(...this._iconClasses);\n\t\tthis._iconClasses = [];\n\t\tif (this.state.type !== LightBulbState.Type.Showing) {\n\t\t\treturn;\n\t\t}\n\t\tlet icon: ThemeIcon;\n\t\tlet autoRun = false;\n\t\tif (this.state.actions.allAIFixes) {\n\t\t\ticon = Codicon.sparkleFilled;\n\t\t\tif (this.state.actions.validActions.length === 1) {\n\t\t\t\tautoRun = true;\n\t\t\t}\n\t\t} else if (this.state.actions.hasAutoFix) {\n\t\t\tif (this.state.actions.hasAIFix) {\n\t\t\t\ticon = Codicon.lightbulbSparkleAutofix;\n\t\t\t} else {\n\t\t\t\ticon = Codicon.lightbulbAutofix;\n\t\t\t}\n\t\t} else if (this.state.actions.hasAIFix) {\n\t\t\ticon = Codicon.lightbulbSparkle;\n\t\t} else {\n\t\t\ticon = Codicon.lightBulb;\n\t\t}\n\t\tthis._updateLightbulbTitle(this.state.actions.hasAutoFix, autoRun);\n\t\tthis._iconClasses = ThemeIcon.asClassNameArray(icon);\n\t\tthis._domNode.classList.add(...this._iconClasses);\n\t}\n\n\tprivate _updateGutterLightBulbTitleAndIcon(): void {\n\t\tif (this.gutterState.type !== LightBulbState.Type.Showing) {\n\t\t\treturn;\n\t\t}\n\t\tlet icon: ThemeIcon;\n\t\tlet autoRun = false;\n\t\tif (this.gutterState.actions.allAIFixes) {\n\t\t\ticon = GUTTER_SPARKLE_FILLED_ICON;\n\t\t\tif (this.gutterState.actions.validActions.length === 1) {\n\t\t\t\tautoRun = true;\n\t\t\t}\n\t\t} else if (this.gutterState.actions.hasAutoFix) {\n\t\t\tif (this.gutterState.actions.hasAIFix) {\n\t\t\t\ticon = GUTTER_LIGHTBULB_AIFIX_AUTO_FIX_ICON;\n\t\t\t} else {\n\t\t\t\ticon = GUTTER_LIGHTBULB_AUTO_FIX_ICON;\n\t\t\t}\n\t\t} else if (this.gutterState.actions.hasAIFix) {\n\t\t\ticon = GUTTER_LIGHTBULB_AIFIX_ICON;\n\t\t} else {\n\t\t\ticon = GUTTER_LIGHTBULB_ICON;\n\t\t}\n\t\tthis._updateLightbulbTitle(this.gutterState.actions.hasAutoFix, autoRun);\n\n\t\tconst GUTTER_DECORATION = ModelDecorationOptions.register({\n\t\t\tdescription: 'codicon-gutter-lightbulb-decoration',\n\t\t\tglyphMarginClassName: ThemeIcon.asClassName(icon),\n\t\t\tglyphMargin: { position: GlyphMarginLane.Left },\n\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\t});\n\n\t\tthis.gutterDecoration = GUTTER_DECORATION;\n\t}\n\n\t/* Gutter Helper Functions */\n\tprivate renderGutterLightbub(): void {\n\t\tconst selection = this._editor.getSelection();\n\t\tif (!selection) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._gutterDecorationID === undefined) {\n\t\t\tthis._addGutterDecoration(selection.startLineNumber);\n\t\t} else {\n\t\t\tthis._updateGutterDecoration(this._gutterDecorationID, selection.startLineNumber);\n\t\t}\n\t}\n\n\tprivate _addGutterDecoration(lineNumber: number) {\n\t\tthis._editor.changeDecorations((accessor: IModelDecorationsChangeAccessor) => {\n\t\t\tthis._gutterDecorationID = accessor.addDecoration(new Range(lineNumber, 0, lineNumber, 0), this.gutterDecoration);\n\t\t});\n\t}\n\n\tprivate _removeGutterDecoration(decorationId: string) {\n\t\tthis._editor.changeDecorations((accessor: IModelDecorationsChangeAccessor) => {\n\t\t\taccessor.removeDecoration(decorationId);\n\t\t\tthis._gutterDecorationID = undefined;\n\t\t});\n\t}\n\n\tprivate _updateGutterDecoration(decorationId: string, lineNumber: number) {\n\t\tthis._editor.changeDecorations((accessor: IModelDecorationsChangeAccessor) => {\n\t\t\taccessor.changeDecoration(decorationId, new Range(lineNumber, 0, lineNumber, 0));\n\t\t\taccessor.changeDecorationOptions(decorationId, this.gutterDecoration);\n\t\t});\n\t}\n\n\tprivate _updateLightbulbTitle(autoFix: boolean, autoRun: boolean): void {\n\t\tif (this.state.type !== LightBulbState.Type.Showing) {\n\t\t\treturn;\n\t\t}\n\t\tif (autoRun) {\n\t\t\tthis.title = nls.localize('codeActionAutoRun', \"Run: {0}\", this.state.actions.validActions[0].action.title);\n\t\t} else if (autoFix && this._preferredKbLabel) {\n\t\t\tthis.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n\t\t} else if (!autoFix && this._quickFixKbLabel) {\n\t\t\tthis.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n\t\t} else if (!autoFix) {\n\t\t\tthis.title = nls.localize('codeAction', \"Show Code Actions\");\n\t\t}\n\t}\n\n\tprivate set title(value: string) {\n\t\tthis._domNode.title = value;\n\t}\n}\n"]}