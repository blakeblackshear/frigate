{"version":3,"sources":["file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.ts","vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.ts"],"names":[],"mappings":"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","file":"diffEditorItemTemplate.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, globalTransaction, observableValue } from '../../../../base/common/observable.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, type IScopedContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IDiffEditorOptions } from '../../../common/config/editorOptions.js';\nimport { OffsetRange } from '../../../common/core/ranges/offsetRange.js';\nimport { observableCodeEditor } from '../../observableCodeEditor.js';\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\nimport { DocumentDiffItemViewModel } from './multiDiffEditorViewModel.js';\nimport { IObjectData, IPooledObject } from './objectPool.js';\nimport { ActionRunnerWithContext } from './utils.js';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class TemplateData implements IObjectData {\n\tconstructor(\n\t\tpublic readonly viewModel: DocumentDiffItemViewModel,\n\t\tpublic readonly deltaScrollVertical: (delta: number) => void,\n\t) { }\n\n\n\tgetId(): unknown {\n\t\treturn this.viewModel;\n\t}\n}\n\nexport class DiffEditorItemTemplate extends Disposable implements IPooledObject<TemplateData> {\n\tprivate readonly _viewModel;\n\n\tprivate readonly _collapsed;\n\n\tprivate readonly _editorContentHeight;\n\tpublic readonly contentHeight;\n\n\tprivate readonly _modifiedContentWidth;\n\tprivate readonly _modifiedWidth;\n\tprivate readonly _originalContentWidth;\n\tprivate readonly _originalWidth;\n\n\tpublic readonly maxScroll;\n\n\tprivate readonly _elements;\n\n\tpublic readonly editor;\n\n\tprivate readonly isModifedFocused;\n\tprivate readonly isOriginalFocused;\n\tpublic readonly isFocused;\n\n\tprivate readonly _resourceLabel;\n\n\tprivate readonly _resourceLabel2;\n\n\tprivate readonly _outerEditorHeight: number;\n\tprivate readonly _contextKeyService: IScopedContextKeyService;\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _overflowWidgetsDomNode: HTMLElement,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService _parentContextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis._viewModel = observableValue<DocumentDiffItemViewModel | undefined>(this, undefined);\n\t\tthis._collapsed = derived(this, reader => this._viewModel.read(reader)?.collapsed.read(reader));\n\t\tthis._editorContentHeight = observableValue<number>(this, 500);\n\t\tthis.contentHeight = derived(this, reader => {\n\t\t\tconst h = this._collapsed.read(reader) ? 0 : this._editorContentHeight.read(reader);\n\t\t\treturn h + this._outerEditorHeight;\n\t\t});\n\t\tthis._modifiedContentWidth = observableValue<number>(this, 0);\n\t\tthis._modifiedWidth = observableValue<number>(this, 0);\n\t\tthis._originalContentWidth = observableValue<number>(this, 0);\n\t\tthis._originalWidth = observableValue<number>(this, 0);\n\t\tthis.maxScroll = derived(this, reader => {\n\t\t\tconst scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\n\t\t\tconst scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\n\t\t\tif (scroll1 > scroll2) {\n\t\t\t\treturn { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\n\t\t\t} else {\n\t\t\t\treturn { maxScroll: scroll2, width: this._originalWidth.read(reader) };\n\t\t\t}\n\t\t});\n\t\tthis._elements = h('div.multiDiffEntry', [\n\t\t\th('div.header@header', [\n\t\t\t\th('div.header-content', [\n\t\t\t\t\th('div.collapse-button@collapseButton'),\n\t\t\t\t\th('div.file-path', [\n\t\t\t\t\t\th('div.title.modified.show-file-icons@primaryPath', [] as any),\n\t\t\t\t\t\th('div.status.deleted@status', ['R']),\n\t\t\t\t\t\th('div.title.original.show-file-icons@secondaryPath', [] as any),\n\t\t\t\t\t]),\n\t\t\t\t\th('div.actions@actions'),\n\t\t\t\t]),\n\t\t\t]),\n\n\t\t\th('div.editorParent', [\n\t\t\t\th('div.editorContainer@editor'),\n\t\t\t])\n\t\t]) as Record<string, HTMLElement>;\n\t\tthis.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\n\t\t\toverflowWidgetsDomNode: this._overflowWidgetsDomNode,\n\t\t}, {}));\n\t\tthis.isModifedFocused = observableCodeEditor(this.editor.getModifiedEditor()).isFocused;\n\t\tthis.isOriginalFocused = observableCodeEditor(this.editor.getOriginalEditor()).isFocused;\n\t\tthis.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\n\t\tthis._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath))\n\t\t\t: undefined;\n\t\tthis._resourceLabel2 = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath))\n\t\t\t: undefined;\n\t\tthis._dataStore = this._register(new DisposableStore());\n\t\tthis._headerHeight = 40;\n\t\tthis._lastScrollTop = -1;\n\t\tthis._isSettingScrollTop = false;\n\n\t\tconst btn = new Button(this._elements.collapseButton, {});\n\n\t\tthis._register(autorun(reader => {\n\t\t\tbtn.element.className = '';\n\t\t\tbtn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t}));\n\t\tthis._register(btn.onDidClick(() => {\n\t\t\tthis._viewModel.get()?.collapsed.set(!this._collapsed.get(), undefined);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\n\t\t}));\n\n\t\tthis._register(this.editor.getModifiedEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._modifiedWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._originalWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.onDidContentSizeChange(e => {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._editorContentHeight.set(e.contentHeight, tx);\n\t\t\t\tthis._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\n\t\t\t\tthis._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidScrollChange(e => {\n\t\t\tif (this._isSettingScrollTop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!e.scrollTopChanged || !this._data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst delta = e.scrollTop - this._lastScrollTop;\n\t\t\tthis._data.deltaScrollVertical(delta);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst isActive = this._viewModel.read(reader)?.isActive.read(reader);\n\t\t\tthis._elements.root.classList.toggle('active', isActive);\n\t\t}));\n\n\t\tthis._container.appendChild(this._elements.root);\n\t\tthis._outerEditorHeight = this._headerHeight;\n\n\t\tthis._contextKeyService = this._register(_parentContextKeyService.createScoped(this._elements.actions));\n\t\tconst instantiationService = this._register(this._instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService])));\n\t\tthis._register(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\n\t\t\tactionRunner: this._register(new ActionRunnerWithContext(() => (this._viewModel.get()?.modifiedUri))),\n\t\t\tmenuOptions: {\n\t\t\t\tshouldForwardArgs: true,\n\t\t\t},\n\t\t\ttoolbarOptions: { primaryGroup: g => g.startsWith('navigation') },\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(instantiationService, action, options),\n\t\t}));\n\t}\n\n\tpublic setScrollLeft(left: number): void {\n\t\tif (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\n\t\t\tthis.editor.getModifiedEditor().setScrollLeft(left);\n\t\t} else {\n\t\t\tthis.editor.getOriginalEditor().setScrollLeft(left);\n\t\t}\n\t}\n\n\tprivate readonly _dataStore;\n\n\tprivate _data: TemplateData | undefined;\n\n\tpublic setData(data: TemplateData | undefined): void {\n\t\tthis._data = data;\n\t\tfunction updateOptions(options: IDiffEditorOptions): IDiffEditorOptions {\n\t\t\treturn {\n\t\t\t\t...options,\n\t\t\t\tscrollBeyondLastLine: false,\n\t\t\t\thideUnchangedRegions: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t},\n\t\t\t\tscrollbar: {\n\t\t\t\t\tvertical: 'hidden',\n\t\t\t\t\thorizontal: 'hidden',\n\t\t\t\t\thandleMouseWheel: false,\n\t\t\t\t\tuseShadows: false,\n\t\t\t\t},\n\t\t\t\trenderOverviewRuler: false,\n\t\t\t\tfixedOverflowWidgets: true,\n\t\t\t\toverviewRulerBorder: false,\n\t\t\t};\n\t\t}\n\n\t\tif (!data) {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._viewModel.set(undefined, tx);\n\t\t\t\tthis.editor.setDiffModel(null, tx);\n\t\t\t\tthis._dataStore.clear();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = data.viewModel.documentDiffItem;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis._resourceLabel?.setUri(data.viewModel.modifiedUri ?? data.viewModel.originalUri!, { strikethrough: data.viewModel.modifiedUri === undefined });\n\n\t\t\tlet isRenamed = false;\n\t\t\tlet isDeleted = false;\n\t\t\tlet isAdded = false;\n\t\t\tlet flag = '';\n\t\t\tif (data.viewModel.modifiedUri && data.viewModel.originalUri && data.viewModel.modifiedUri.path !== data.viewModel.originalUri.path) {\n\t\t\t\tflag = 'R';\n\t\t\t\tisRenamed = true;\n\t\t\t} else if (!data.viewModel.modifiedUri) {\n\t\t\t\tflag = 'D';\n\t\t\t\tisDeleted = true;\n\t\t\t} else if (!data.viewModel.originalUri) {\n\t\t\t\tflag = 'A';\n\t\t\t\tisAdded = true;\n\t\t\t}\n\t\t\tthis._elements.status.classList.toggle('renamed', isRenamed);\n\t\t\tthis._elements.status.classList.toggle('deleted', isDeleted);\n\t\t\tthis._elements.status.classList.toggle('added', isAdded);\n\t\t\tthis._elements.status.innerText = flag;\n\n\t\t\tthis._resourceLabel2?.setUri(isRenamed ? data.viewModel.originalUri : undefined, { strikethrough: true });\n\n\t\t\tthis._dataStore.clear();\n\t\t\tthis._viewModel.set(data.viewModel, tx);\n\t\t\tthis.editor.setDiffModel(data.viewModel.diffEditorViewModelRef, tx);\n\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t});\n\t\tif (value.onOptionsDidChange) {\n\t\t\tthis._dataStore.add(value.onOptionsDidChange(() => {\n\t\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t\t}));\n\t\t}\n\t\tdata.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore, value => {\n\t\t\tif (!value) {\n\t\t\t\tthis.setData(undefined);\n\t\t\t}\n\t\t});\n\n\t\tif (data.viewModel.documentDiffItem.contextKeys) {\n\t\t\tfor (const [key, value] of Object.entries(data.viewModel.documentDiffItem.contextKeys)) {\n\t\t\t\tthis._contextKeyService.createKey(key, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _headerHeight;\n\n\tprivate _lastScrollTop;\n\tprivate _isSettingScrollTop;\n\n\tpublic render(verticalRange: OffsetRange, width: number, editorScroll: number, viewPort: OffsetRange): void {\n\t\tthis._elements.root.style.visibility = 'visible';\n\t\tthis._elements.root.style.top = `${verticalRange.start}px`;\n\t\tthis._elements.root.style.height = `${verticalRange.length}px`;\n\t\tthis._elements.root.style.width = `${width}px`;\n\t\tthis._elements.root.style.position = 'absolute';\n\n\t\t// For sticky scroll\n\t\tconst maxDelta = verticalRange.length - this._headerHeight;\n\t\tconst delta = Math.max(0, Math.min(viewPort.start - verticalRange.start, maxDelta));\n\t\tthis._elements.header.style.transform = `translateY(${delta}px)`;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis.editor.layout({\n\t\t\t\twidth: width - 2 * 8 - 2 * 1,\n\t\t\t\theight: verticalRange.length - this._outerEditorHeight,\n\t\t\t});\n\t\t});\n\t\ttry {\n\t\t\tthis._isSettingScrollTop = true;\n\t\t\tthis._lastScrollTop = editorScroll;\n\t\t\tthis.editor.getOriginalEditor().setScrollTop(editorScroll);\n\t\t} finally {\n\t\t\tthis._isSettingScrollTop = false;\n\t\t}\n\n\t\tthis._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\n\t\tthis._elements.header.classList.toggle('collapsed', delta === maxDelta);\n\t}\n\n\tpublic hide(): void {\n\t\tthis._elements.root.style.top = `-100000px`;\n\t\tthis._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, globalTransaction, observableValue } from '../../../../base/common/observable.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, type IScopedContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IDiffEditorOptions } from '../../../common/config/editorOptions.js';\nimport { OffsetRange } from '../../../common/core/ranges/offsetRange.js';\nimport { observableCodeEditor } from '../../observableCodeEditor.js';\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\nimport { DocumentDiffItemViewModel } from './multiDiffEditorViewModel.js';\nimport { IObjectData, IPooledObject } from './objectPool.js';\nimport { ActionRunnerWithContext } from './utils.js';\nimport { IWorkbenchUIElementFactory } from './workbenchUIElementFactory.js';\n\nexport class TemplateData implements IObjectData {\n\tconstructor(\n\t\tpublic readonly viewModel: DocumentDiffItemViewModel,\n\t\tpublic readonly deltaScrollVertical: (delta: number) => void,\n\t) { }\n\n\n\tgetId(): unknown {\n\t\treturn this.viewModel;\n\t}\n}\n\nexport class DiffEditorItemTemplate extends Disposable implements IPooledObject<TemplateData> {\n\tprivate readonly _viewModel;\n\n\tprivate readonly _collapsed;\n\n\tprivate readonly _editorContentHeight;\n\tpublic readonly contentHeight;\n\n\tprivate readonly _modifiedContentWidth;\n\tprivate readonly _modifiedWidth;\n\tprivate readonly _originalContentWidth;\n\tprivate readonly _originalWidth;\n\n\tpublic readonly maxScroll;\n\n\tprivate readonly _elements;\n\n\tpublic readonly editor;\n\n\tprivate readonly isModifedFocused;\n\tprivate readonly isOriginalFocused;\n\tpublic readonly isFocused;\n\n\tprivate readonly _resourceLabel;\n\n\tprivate readonly _resourceLabel2;\n\n\tprivate readonly _outerEditorHeight: number;\n\tprivate readonly _contextKeyService: IScopedContextKeyService;\n\n\tconstructor(\n\t\tprivate readonly _container: HTMLElement,\n\t\tprivate readonly _overflowWidgetsDomNode: HTMLElement,\n\t\tprivate readonly _workbenchUIElementFactory: IWorkbenchUIElementFactory,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService _parentContextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\t\tthis._viewModel = observableValue<DocumentDiffItemViewModel | undefined>(this, undefined);\n\t\tthis._collapsed = derived(this, reader => this._viewModel.read(reader)?.collapsed.read(reader));\n\t\tthis._editorContentHeight = observableValue<number>(this, 500);\n\t\tthis.contentHeight = derived(this, reader => {\n\t\t\tconst h = this._collapsed.read(reader) ? 0 : this._editorContentHeight.read(reader);\n\t\t\treturn h + this._outerEditorHeight;\n\t\t});\n\t\tthis._modifiedContentWidth = observableValue<number>(this, 0);\n\t\tthis._modifiedWidth = observableValue<number>(this, 0);\n\t\tthis._originalContentWidth = observableValue<number>(this, 0);\n\t\tthis._originalWidth = observableValue<number>(this, 0);\n\t\tthis.maxScroll = derived(this, reader => {\n\t\t\tconst scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\n\t\t\tconst scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\n\t\t\tif (scroll1 > scroll2) {\n\t\t\t\treturn { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\n\t\t\t} else {\n\t\t\t\treturn { maxScroll: scroll2, width: this._originalWidth.read(reader) };\n\t\t\t}\n\t\t});\n\t\tthis._elements = h('div.multiDiffEntry', [\n\t\t\th('div.header@header', [\n\t\t\t\th('div.header-content', [\n\t\t\t\t\th('div.collapse-button@collapseButton'),\n\t\t\t\t\th('div.file-path', [\n\t\t\t\t\t\th('div.title.modified.show-file-icons@primaryPath', [] as any),\n\t\t\t\t\t\th('div.status.deleted@status', ['R']),\n\t\t\t\t\t\th('div.title.original.show-file-icons@secondaryPath', [] as any),\n\t\t\t\t\t]),\n\t\t\t\t\th('div.actions@actions'),\n\t\t\t\t]),\n\t\t\t]),\n\n\t\t\th('div.editorParent', [\n\t\t\t\th('div.editorContainer@editor'),\n\t\t\t])\n\t\t]) as Record<string, HTMLElement>;\n\t\tthis.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\n\t\t\toverflowWidgetsDomNode: this._overflowWidgetsDomNode,\n\t\t}, {}));\n\t\tthis.isModifedFocused = observableCodeEditor(this.editor.getModifiedEditor()).isFocused;\n\t\tthis.isOriginalFocused = observableCodeEditor(this.editor.getOriginalEditor()).isFocused;\n\t\tthis.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\n\t\tthis._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath))\n\t\t\t: undefined;\n\t\tthis._resourceLabel2 = this._workbenchUIElementFactory.createResourceLabel\n\t\t\t? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath))\n\t\t\t: undefined;\n\t\tthis._dataStore = this._register(new DisposableStore());\n\t\tthis._headerHeight = 40;\n\t\tthis._lastScrollTop = -1;\n\t\tthis._isSettingScrollTop = false;\n\n\t\tconst btn = new Button(this._elements.collapseButton, {});\n\n\t\tthis._register(autorun(reader => {\n\t\t\tbtn.element.className = '';\n\t\t\tbtn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t}));\n\t\tthis._register(btn.onDidClick(() => {\n\t\t\tthis._viewModel.get()?.collapsed.set(!this._collapsed.get(), undefined);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tthis._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\n\t\t}));\n\n\t\tthis._register(this.editor.getModifiedEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._modifiedWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidLayoutChange(e => {\n\t\t\tconst width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\n\t\t\tthis._originalWidth.set(width, undefined);\n\t\t}));\n\n\t\tthis._register(this.editor.onDidContentSizeChange(e => {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._editorContentHeight.set(e.contentHeight, tx);\n\t\t\t\tthis._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\n\t\t\t\tthis._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this.editor.getOriginalEditor().onDidScrollChange(e => {\n\t\t\tif (this._isSettingScrollTop) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!e.scrollTopChanged || !this._data) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst delta = e.scrollTop - this._lastScrollTop;\n\t\t\tthis._data.deltaScrollVertical(delta);\n\t\t}));\n\n\t\tthis._register(autorun(reader => {\n\t\t\tconst isActive = this._viewModel.read(reader)?.isActive.read(reader);\n\t\t\tthis._elements.root.classList.toggle('active', isActive);\n\t\t}));\n\n\t\tthis._container.appendChild(this._elements.root);\n\t\tthis._outerEditorHeight = this._headerHeight;\n\n\t\tthis._contextKeyService = this._register(_parentContextKeyService.createScoped(this._elements.actions));\n\t\tconst instantiationService = this._register(this._instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService])));\n\t\tthis._register(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\n\t\t\tactionRunner: this._register(new ActionRunnerWithContext(() => (this._viewModel.get()?.modifiedUri))),\n\t\t\tmenuOptions: {\n\t\t\t\tshouldForwardArgs: true,\n\t\t\t},\n\t\t\ttoolbarOptions: { primaryGroup: g => g.startsWith('navigation') },\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(instantiationService, action, options),\n\t\t}));\n\t}\n\n\tpublic setScrollLeft(left: number): void {\n\t\tif (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\n\t\t\tthis.editor.getModifiedEditor().setScrollLeft(left);\n\t\t} else {\n\t\t\tthis.editor.getOriginalEditor().setScrollLeft(left);\n\t\t}\n\t}\n\n\tprivate readonly _dataStore;\n\n\tprivate _data: TemplateData | undefined;\n\n\tpublic setData(data: TemplateData | undefined): void {\n\t\tthis._data = data;\n\t\tfunction updateOptions(options: IDiffEditorOptions): IDiffEditorOptions {\n\t\t\treturn {\n\t\t\t\t...options,\n\t\t\t\tscrollBeyondLastLine: false,\n\t\t\t\thideUnchangedRegions: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t},\n\t\t\t\tscrollbar: {\n\t\t\t\t\tvertical: 'hidden',\n\t\t\t\t\thorizontal: 'hidden',\n\t\t\t\t\thandleMouseWheel: false,\n\t\t\t\t\tuseShadows: false,\n\t\t\t\t},\n\t\t\t\trenderOverviewRuler: false,\n\t\t\t\tfixedOverflowWidgets: true,\n\t\t\t\toverviewRulerBorder: false,\n\t\t\t};\n\t\t}\n\n\t\tif (!data) {\n\t\t\tglobalTransaction(tx => {\n\t\t\t\tthis._viewModel.set(undefined, tx);\n\t\t\t\tthis.editor.setDiffModel(null, tx);\n\t\t\t\tthis._dataStore.clear();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = data.viewModel.documentDiffItem;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis._resourceLabel?.setUri(data.viewModel.modifiedUri ?? data.viewModel.originalUri!, { strikethrough: data.viewModel.modifiedUri === undefined });\n\n\t\t\tlet isRenamed = false;\n\t\t\tlet isDeleted = false;\n\t\t\tlet isAdded = false;\n\t\t\tlet flag = '';\n\t\t\tif (data.viewModel.modifiedUri && data.viewModel.originalUri && data.viewModel.modifiedUri.path !== data.viewModel.originalUri.path) {\n\t\t\t\tflag = 'R';\n\t\t\t\tisRenamed = true;\n\t\t\t} else if (!data.viewModel.modifiedUri) {\n\t\t\t\tflag = 'D';\n\t\t\t\tisDeleted = true;\n\t\t\t} else if (!data.viewModel.originalUri) {\n\t\t\t\tflag = 'A';\n\t\t\t\tisAdded = true;\n\t\t\t}\n\t\t\tthis._elements.status.classList.toggle('renamed', isRenamed);\n\t\t\tthis._elements.status.classList.toggle('deleted', isDeleted);\n\t\t\tthis._elements.status.classList.toggle('added', isAdded);\n\t\t\tthis._elements.status.innerText = flag;\n\n\t\t\tthis._resourceLabel2?.setUri(isRenamed ? data.viewModel.originalUri : undefined, { strikethrough: true });\n\n\t\t\tthis._dataStore.clear();\n\t\t\tthis._viewModel.set(data.viewModel, tx);\n\t\t\tthis.editor.setDiffModel(data.viewModel.diffEditorViewModelRef, tx);\n\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t});\n\t\tif (value.onOptionsDidChange) {\n\t\t\tthis._dataStore.add(value.onOptionsDidChange(() => {\n\t\t\t\tthis.editor.updateOptions(updateOptions(value.options ?? {}));\n\t\t\t}));\n\t\t}\n\t\tdata.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore, value => {\n\t\t\tif (!value) {\n\t\t\t\tthis.setData(undefined);\n\t\t\t}\n\t\t});\n\n\t\tif (data.viewModel.documentDiffItem.contextKeys) {\n\t\t\tfor (const [key, value] of Object.entries(data.viewModel.documentDiffItem.contextKeys)) {\n\t\t\t\tthis._contextKeyService.createKey(key, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate readonly _headerHeight;\n\n\tprivate _lastScrollTop;\n\tprivate _isSettingScrollTop;\n\n\tpublic render(verticalRange: OffsetRange, width: number, editorScroll: number, viewPort: OffsetRange): void {\n\t\tthis._elements.root.style.visibility = 'visible';\n\t\tthis._elements.root.style.top = `${verticalRange.start}px`;\n\t\tthis._elements.root.style.height = `${verticalRange.length}px`;\n\t\tthis._elements.root.style.width = `${width}px`;\n\t\tthis._elements.root.style.position = 'absolute';\n\n\t\t// For sticky scroll\n\t\tconst maxDelta = verticalRange.length - this._headerHeight;\n\t\tconst delta = Math.max(0, Math.min(viewPort.start - verticalRange.start, maxDelta));\n\t\tthis._elements.header.style.transform = `translateY(${delta}px)`;\n\n\t\tglobalTransaction(tx => {\n\t\t\tthis.editor.layout({\n\t\t\t\twidth: width - 2 * 8 - 2 * 1,\n\t\t\t\theight: verticalRange.length - this._outerEditorHeight,\n\t\t\t});\n\t\t});\n\t\ttry {\n\t\t\tthis._isSettingScrollTop = true;\n\t\t\tthis._lastScrollTop = editorScroll;\n\t\t\tthis.editor.getOriginalEditor().setScrollTop(editorScroll);\n\t\t} finally {\n\t\t\tthis._isSettingScrollTop = false;\n\t\t}\n\n\t\tthis._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\n\t\tthis._elements.header.classList.toggle('collapsed', delta === maxDelta);\n\t}\n\n\tpublic hide(): void {\n\t\tthis._elements.root.style.top = `-100000px`;\n\t\tthis._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\n\t}\n}\n"]}