{"version":3,"sources":["vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.ts"],"names":[],"mappings":"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","file":"gotoSymbolQuickAccess.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IMatch } from '../../../../base/common/filters.js';\nimport { IPreparedQuery, pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, IDisposable, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { IRange, Range } from '../../../common/core/range.js';\nimport { ScrollType } from '../../../common/editorCommon.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { DocumentSymbol, SymbolKind, SymbolKinds, SymbolTag, getAriaLabelForSymbol } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider, IEditorNavigationQuickAccessOptions, IQuickAccessTextEditorContext } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { IQuickInputButton, IQuickPick, IQuickPickItem, IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Position } from '../../../common/core/position.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { IQuickAccessProviderRunOptions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { URI } from '../../../../base/common/uri.js';\n\nexport interface IGotoSymbolQuickPickItem extends IQuickPickItem {\n\tkind: SymbolKind;\n\tindex: number;\n\tscore?: number;\n\turi?: URI;\n\tsymbolName?: string;\n\trange?: { decoration: IRange; selection: IRange };\n}\n\nexport interface IGotoSymbolQuickAccessProviderOptions extends IEditorNavigationQuickAccessOptions {\n\topenSideBySideDirection?: () => undefined | 'right' | 'down';\n}\n\nexport abstract class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n\n\tstatic PREFIX = '@';\n\tstatic SCOPE_PREFIX = ':';\n\tstatic PREFIX_BY_CATEGORY = `${this.PREFIX}${this.SCOPE_PREFIX}`;\n\n\tprotected override readonly options: IGotoSymbolQuickAccessProviderOptions;\n\n\tconstructor(\n\t\t@ILanguageFeaturesService private readonly _languageFeaturesService: ILanguageFeaturesService,\n\t\t@IOutlineModelService private readonly _outlineModelService: IOutlineModelService,\n\t\toptions: IGotoSymbolQuickAccessProviderOptions = Object.create(null)\n\t) {\n\t\tsuper(options);\n\n\t\tthis.options = options;\n\t\tthis.options.canAcceptInBackground = true;\n\t}\n\n\tprotected provideWithoutTextEditor(picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>): IDisposable {\n\t\tthis.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n\n\t\treturn Disposable.None;\n\t}\n\n\tprotected provideWithTextEditor(context: IQuickAccessTextEditorContext, picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>, token: CancellationToken, runOptions?: IQuickAccessProviderRunOptions): IDisposable {\n\t\tconst editor = context.editor;\n\t\tconst model = this.getModel(editor);\n\t\tif (!model) {\n\t\t\treturn Disposable.None;\n\t\t}\n\n\t\t// Provide symbols from model if available in registry\n\t\tif (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n\t\t\treturn this.doProvideWithEditorSymbols(context, model, picker, token, runOptions);\n\t\t}\n\n\t\t// Otherwise show an entry for a model without registry\n\t\t// But give a chance to resolve the symbols at a later\n\t\t// point if possible\n\t\treturn this.doProvideWithoutEditorSymbols(context, model, picker, token);\n\t}\n\n\tprivate doProvideWithoutEditorSymbols(context: IQuickAccessTextEditorContext, model: ITextModel, picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>, token: CancellationToken): IDisposable {\n\t\tconst disposables = new DisposableStore();\n\n\t\t// Generic pick for not having any symbol information\n\t\tthis.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n\n\t\t// Wait for changes to the registry and see if eventually\n\t\t// we do get symbols. This can happen if the picker is opened\n\t\t// very early after the model has loaded but before the\n\t\t// language registry is ready.\n\t\t// https://github.com/microsoft/vscode/issues/70607\n\t\t(async () => {\n\t\t\tconst result = await this.waitForLanguageSymbolRegistry(model, disposables);\n\t\t\tif (!result || token.isCancellationRequested) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdisposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n\t\t})();\n\n\t\treturn disposables;\n\t}\n\n\tprivate provideLabelPick(picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>, label: string): void {\n\t\tpicker.items = [{ label, index: 0, kind: SymbolKind.String }];\n\t\tpicker.ariaLabel = label;\n\t}\n\n\tprotected async waitForLanguageSymbolRegistry(model: ITextModel, disposables: DisposableStore): Promise<boolean> {\n\t\tif (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst symbolProviderRegistryPromise = new DeferredPromise<boolean>();\n\n\t\t// Resolve promise when registry knows model\n\t\tconst symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n\t\t\tif (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n\t\t\t\tsymbolProviderListener.dispose();\n\n\t\t\t\tsymbolProviderRegistryPromise.complete(true);\n\t\t\t}\n\t\t}));\n\n\t\t// Resolve promise when we get disposed too\n\t\tdisposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n\n\t\treturn symbolProviderRegistryPromise.p;\n\t}\n\n\tprivate doProvideWithEditorSymbols(context: IQuickAccessTextEditorContext, model: ITextModel, picker: IQuickPick<IGotoSymbolQuickPickItem, { useSeparators: true }>, token: CancellationToken, runOptions?: IQuickAccessProviderRunOptions): IDisposable {\n\t\tconst editor = context.editor;\n\t\tconst disposables = new DisposableStore();\n\n\t\t// Goto symbol once picked\n\t\tdisposables.add(picker.onDidAccept(event => {\n\t\t\tconst [item] = picker.selectedItems;\n\t\t\tif (item && item.range) {\n\t\t\t\tthis.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n\n\t\t\t\trunOptions?.handleAccept?.(item, event.inBackground);\n\n\t\t\t\tif (!event.inBackground) {\n\t\t\t\t\tpicker.hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Goto symbol side by side if enabled\n\t\tdisposables.add(picker.onDidTriggerItemButton(({ item }) => {\n\t\t\tif (item && item.range) {\n\t\t\t\tthis.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n\n\t\t\t\tpicker.hide();\n\t\t\t}\n\t\t}));\n\n\t\t// Resolve symbols from document once and reuse this\n\t\t// request for all filtering and typing then on\n\t\tconst symbolsPromise = this.getDocumentSymbols(model, token);\n\n\t\t// Set initial picks and update on type\n\t\tconst picksCts = disposables.add(new MutableDisposable<CancellationTokenSource>());\n\t\tconst updatePickerItems = async (positionToEnclose: Position | undefined) => {\n\n\t\t\t// Cancel any previous ask for picks and busy\n\t\t\tpicksCts?.value?.cancel();\n\t\t\tpicker.busy = false;\n\n\t\t\t// Create new cancellation source for this run\n\t\t\tpicksCts.value = new CancellationTokenSource();\n\n\t\t\t// Collect symbol picks\n\t\t\tpicker.busy = true;\n\t\t\ttry {\n\t\t\t\tconst query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n\t\t\t\tconst items = await this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.value.token, model);\n\t\t\t\tif (token.isCancellationRequested) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (items.length > 0) {\n\t\t\t\t\tpicker.items = items;\n\t\t\t\t\tif (positionToEnclose && query.original.length === 0) {\n\t\t\t\t\t\tconst candidate = <IGotoSymbolQuickPickItem>findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n\t\t\t\t\t\tif (candidate) {\n\t\t\t\t\t\t\tpicker.activeItems = [candidate];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tif (query.original.length > 0) {\n\t\t\t\t\t\tthis.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (!token.isCancellationRequested) {\n\t\t\t\t\tpicker.busy = false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tdisposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n\t\tupdatePickerItems(editor.getSelection()?.getPosition());\n\n\n\t\t// Reveal and decorate when active item changes\n\t\tdisposables.add(picker.onDidChangeActive(() => {\n\t\t\tconst [item] = picker.activeItems;\n\t\t\tif (item && item.range) {\n\n\t\t\t\t// Reveal\n\t\t\t\teditor.revealRangeInCenter(item.range.selection, ScrollType.Smooth);\n\n\t\t\t\t// Decorate\n\t\t\t\tthis.addDecorations(editor, item.range.decoration);\n\t\t\t}\n\t\t}));\n\n\t\treturn disposables;\n\t}\n\n\tprotected async doGetSymbolPicks(symbolsPromise: Promise<DocumentSymbol[]>, query: IPreparedQuery, options: { extraContainerLabel?: string } | undefined, token: CancellationToken, model: ITextModel): Promise<Array<IGotoSymbolQuickPickItem | IQuickPickSeparator>> {\n\t\tconst symbols = await symbolsPromise;\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n\t\tconst filterPos = filterBySymbolKind ? 1 : 0;\n\n\t\t// Split between symbol and container query\n\t\tlet symbolQuery: IPreparedQuery;\n\t\tlet containerQuery: IPreparedQuery | undefined;\n\t\tif (query.values && query.values.length > 1) {\n\t\t\tsymbolQuery = pieceToQuery(query.values[0]); \t\t  // symbol: only match on first part\n\t\t\tcontainerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n\t\t} else {\n\t\t\tsymbolQuery = query;\n\t\t}\n\n\t\t// Convert to symbol picks and apply filtering\n\n\t\tlet buttons: IQuickInputButton[] | undefined;\n\t\tconst openSideBySideDirection = this.options?.openSideBySideDirection?.();\n\t\tif (openSideBySideDirection) {\n\t\t\tbuttons = [{\n\t\t\t\ticonClass: openSideBySideDirection === 'right' ? ThemeIcon.asClassName(Codicon.splitHorizontal) : ThemeIcon.asClassName(Codicon.splitVertical),\n\t\t\t\ttooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n\t\t\t}];\n\t\t}\n\n\t\tconst filteredSymbolPicks: IGotoSymbolQuickPickItem[] = [];\n\t\tfor (let index = 0; index < symbols.length; index++) {\n\t\t\tconst symbol = symbols[index];\n\n\t\t\tconst symbolLabel = trim(symbol.name);\n\t\t\tconst symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n\t\t\tconst symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n\n\t\t\tlet containerLabel = symbol.containerName;\n\t\t\tif (options?.extraContainerLabel) {\n\t\t\t\tif (containerLabel) {\n\t\t\t\t\tcontainerLabel = `${options.extraContainerLabel} â€¢ ${containerLabel}`;\n\t\t\t\t} else {\n\t\t\t\t\tcontainerLabel = options.extraContainerLabel;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet symbolScore: number | undefined = undefined;\n\t\t\tlet symbolMatches: IMatch[] | undefined = undefined;\n\n\t\t\tlet containerScore: number | undefined = undefined;\n\t\t\tlet containerMatches: IMatch[] | undefined = undefined;\n\n\t\t\tif (query.original.length > filterPos) {\n\n\t\t\t\t// First: try to score on the entire query, it is possible that\n\t\t\t\t// the symbol matches perfectly (e.g. searching for \"change log\"\n\t\t\t\t// can be a match on a markdown symbol \"change log\"). In that\n\t\t\t\t// case we want to skip the container query altogether.\n\t\t\t\tlet skipContainerQuery = false;\n\t\t\t\tif (symbolQuery !== query) {\n\t\t\t\t\t[symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, { ...query, values: undefined /* disable multi-query support */ }, filterPos, symbolLabelIconOffset);\n\t\t\t\t\tif (typeof symbolScore === 'number') {\n\t\t\t\t\t\tskipContainerQuery = true; // since we consumed the query, skip any container matching\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Otherwise: score on the symbol query and match on the container later\n\t\t\t\tif (typeof symbolScore !== 'number') {\n\t\t\t\t\t[symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n\t\t\t\t\tif (typeof symbolScore !== 'number') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Score by container if specified\n\t\t\t\tif (!skipContainerQuery && containerQuery) {\n\t\t\t\t\tif (containerLabel && containerQuery.original.length > 0) {\n\t\t\t\t\t\t[containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof containerScore !== 'number') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof symbolScore === 'number') {\n\t\t\t\t\t\tsymbolScore += containerScore; // boost symbolScore by containerScore\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst deprecated = symbol.tags && symbol.tags.indexOf(SymbolTag.Deprecated) >= 0;\n\n\t\t\tfilteredSymbolPicks.push({\n\t\t\t\tindex,\n\t\t\t\tkind: symbol.kind,\n\t\t\t\tscore: symbolScore,\n\t\t\t\tlabel: symbolLabelWithIcon,\n\t\t\t\tariaLabel: getAriaLabelForSymbol(symbol.name, symbol.kind),\n\t\t\t\tdescription: containerLabel,\n\t\t\t\thighlights: deprecated ? undefined : {\n\t\t\t\t\tlabel: symbolMatches,\n\t\t\t\t\tdescription: containerMatches\n\t\t\t\t},\n\t\t\t\trange: {\n\t\t\t\t\tselection: Range.collapseToStart(symbol.selectionRange),\n\t\t\t\t\tdecoration: symbol.range\n\t\t\t\t},\n\t\t\t\turi: model.uri,\n\t\t\t\tsymbolName: symbolLabel,\n\t\t\t\tstrikethrough: deprecated,\n\t\t\t\tbuttons\n\t\t\t});\n\t\t}\n\n\t\t// Sort by score\n\t\tconst sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n\t\t\tthis.compareByKindAndScore(symbolA, symbolB) :\n\t\t\tthis.compareByScore(symbolA, symbolB)\n\t\t);\n\n\t\t// Add separator for types\n\t\t// - @  only total number of symbols\n\t\t// - @: grouped by symbol kind\n\t\tlet symbolPicks: Array<IGotoSymbolQuickPickItem | IQuickPickSeparator> = [];\n\t\tif (filterBySymbolKind) {\n\t\t\tlet lastSymbolKind: SymbolKind | undefined = undefined;\n\t\t\tlet lastSeparator: IQuickPickSeparator | undefined = undefined;\n\t\t\tlet lastSymbolKindCounter = 0;\n\n\t\t\tfunction updateLastSeparatorLabel(): void {\n\t\t\t\tif (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n\t\t\t\t\tlastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const symbolPick of sortedFilteredSymbolPicks) {\n\n\t\t\t\t// Found new kind\n\t\t\t\tif (lastSymbolKind !== symbolPick.kind) {\n\n\t\t\t\t\t// Update last separator with number of symbols we found for kind\n\t\t\t\t\tupdateLastSeparatorLabel();\n\n\t\t\t\t\tlastSymbolKind = symbolPick.kind;\n\t\t\t\t\tlastSymbolKindCounter = 1;\n\n\t\t\t\t\t// Add new separator for new kind\n\t\t\t\t\tlastSeparator = { type: 'separator' };\n\t\t\t\t\tsymbolPicks.push(lastSeparator);\n\t\t\t\t}\n\n\t\t\t\t// Existing kind, keep counting\n\t\t\t\telse {\n\t\t\t\t\tlastSymbolKindCounter++;\n\t\t\t\t}\n\n\t\t\t\t// Add to final result\n\t\t\t\tsymbolPicks.push(symbolPick);\n\t\t\t}\n\n\t\t\t// Update last separator with number of symbols we found for kind\n\t\t\tupdateLastSeparatorLabel();\n\t\t} else if (sortedFilteredSymbolPicks.length > 0) {\n\t\t\tsymbolPicks = [\n\t\t\t\t{ label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n\t\t\t\t...sortedFilteredSymbolPicks\n\t\t\t];\n\t\t}\n\n\t\treturn symbolPicks;\n\t}\n\n\tprivate compareByScore(symbolA: IGotoSymbolQuickPickItem, symbolB: IGotoSymbolQuickPickItem): number {\n\t\tif (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n\t\t\treturn 1;\n\t\t} else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n\t\t\tif (symbolA.score > symbolB.score) {\n\t\t\t\treturn -1;\n\t\t\t} else if (symbolA.score < symbolB.score) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\n\t\tif (symbolA.index < symbolB.index) {\n\t\t\treturn -1;\n\t\t} else if (symbolA.index > symbolB.index) {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tprivate compareByKindAndScore(symbolA: IGotoSymbolQuickPickItem, symbolB: IGotoSymbolQuickPickItem): number {\n\t\tconst kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n\t\tconst kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n\n\t\t// Sort by type first if scoped search\n\t\tconst result = kindA.localeCompare(kindB);\n\t\tif (result === 0) {\n\t\t\treturn this.compareByScore(symbolA, symbolB);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected async getDocumentSymbols(document: ITextModel, token: CancellationToken): Promise<DocumentSymbol[]> {\n\t\tconst model = await this._outlineModelService.getOrCreate(document, token);\n\t\treturn token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n\t}\n}\n\n// #region NLS Helpers\n\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE: { [type: number]: string } = {\n\t[SymbolKind.Method]: localize('method', \"methods ({0})\"),\n\t[SymbolKind.Function]: localize('function', \"functions ({0})\"),\n\t[SymbolKind.Constructor]: localize('_constructor', \"constructors ({0})\"),\n\t[SymbolKind.Variable]: localize('variable', \"variables ({0})\"),\n\t[SymbolKind.Class]: localize('class', \"classes ({0})\"),\n\t[SymbolKind.Struct]: localize('struct', \"structs ({0})\"),\n\t[SymbolKind.Event]: localize('event', \"events ({0})\"),\n\t[SymbolKind.Operator]: localize('operator', \"operators ({0})\"),\n\t[SymbolKind.Interface]: localize('interface', \"interfaces ({0})\"),\n\t[SymbolKind.Namespace]: localize('namespace', \"namespaces ({0})\"),\n\t[SymbolKind.Package]: localize('package', \"packages ({0})\"),\n\t[SymbolKind.TypeParameter]: localize('typeParameter', \"type parameters ({0})\"),\n\t[SymbolKind.Module]: localize('modules', \"modules ({0})\"),\n\t[SymbolKind.Property]: localize('property', \"properties ({0})\"),\n\t[SymbolKind.Enum]: localize('enum', \"enumerations ({0})\"),\n\t[SymbolKind.EnumMember]: localize('enumMember', \"enumeration members ({0})\"),\n\t[SymbolKind.String]: localize('string', \"strings ({0})\"),\n\t[SymbolKind.File]: localize('file', \"files ({0})\"),\n\t[SymbolKind.Array]: localize('array', \"arrays ({0})\"),\n\t[SymbolKind.Number]: localize('number', \"numbers ({0})\"),\n\t[SymbolKind.Boolean]: localize('boolean', \"booleans ({0})\"),\n\t[SymbolKind.Object]: localize('object', \"objects ({0})\"),\n\t[SymbolKind.Key]: localize('key', \"keys ({0})\"),\n\t[SymbolKind.Field]: localize('field', \"fields ({0})\"),\n\t[SymbolKind.Constant]: localize('constant', \"constants ({0})\")\n};\n\n//#endregion\n"]}