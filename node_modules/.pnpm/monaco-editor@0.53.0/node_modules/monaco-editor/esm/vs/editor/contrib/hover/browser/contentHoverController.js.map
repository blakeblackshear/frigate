{"version":3,"sources":["file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src/vs/editor/contrib/hover/browser/contentHoverController.ts","vs/editor/contrib/hover/browser/contentHoverController.ts"],"names":[],"mappings":"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","file":"contentHoverController.js","sourceRoot":"file:///mnt/vss/_work/1/s/dependencies/vscode/out-editor-src","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DECREASE_HOVER_VERBOSITY_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_ID, SHOW_OR_FOCUS_HOVER_ACTION_ID } from './hoverActionIds.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor, IEditorMouseEvent, IPartialEditorMouseEvent } from '../../../browser/editorBrowser.js';\nimport { ConfigurationChangedEvent, EditorOption } from '../../../common/config/editorOptions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IEditorContribution, IScrollEvent } from '../../../common/editorCommon.js';\nimport { HoverStartMode, HoverStartSource } from './hoverOperation.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InlineSuggestionHintsContentWidget } from '../../inlineCompletions/browser/hintsWidget/inlineCompletionsHintsWidget.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ResultKind } from '../../../../platform/keybinding/common/keybindingResolver.js';\nimport { HoverVerbosityAction } from '../../../common/languages.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { isMousePositionWithinElement } from './hoverUtils.js';\nimport { ContentHoverWidgetWrapper } from './contentHoverWidgetWrapper.js';\nimport './hover.css';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { isOnColorDecorator } from '../../colorPicker/browser/hoverColorPicker/hoverColorPicker.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n\n// sticky hover widget which doesn't disappear on focus out and such\nconst _sticky = false\n\t// || Boolean(\"true\") // done \"weirdly\" so that a lint warning prevents you from pushing this\n\t;\n\ninterface IHoverSettings {\n\treadonly enabled: boolean;\n\treadonly sticky: boolean;\n\treadonly hidingDelay: number;\n}\n\nexport class ContentHoverController extends Disposable implements IEditorContribution {\n\n\tprivate readonly _onHoverContentsChanged = this._register(new Emitter<void>());\n\n\tpublic static readonly ID = 'editor.contrib.contentHover';\n\n\tpublic shouldKeepOpenOnEditorMouseMoveOrLeave: boolean = false;\n\n\tprivate readonly _listenersStore = new DisposableStore();\n\n\tprivate _contentWidget: ContentHoverWidgetWrapper | undefined;\n\n\tprivate _mouseMoveEvent: IEditorMouseEvent | undefined;\n\tprivate _reactToEditorMouseMoveRunner: RunOnceScheduler;\n\n\tprivate _hoverSettings!: IHoverSettings;\n\tprivate _isMouseDown: boolean = false;\n\n\tprivate _ignoreMouseEvents: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IContextMenuService _contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\t\tthis._reactToEditorMouseMoveRunner = this._register(new RunOnceScheduler(\n\t\t\t() => {\n\t\t\t\tif (this._mouseMoveEvent) {\n\t\t\t\t\tthis._reactToEditorMouseMove(this._mouseMoveEvent);\n\t\t\t\t}\n\t\t\t}, 0\n\t\t));\n\t\tthis._register(_contextMenuService.onDidShowContextMenu(() => {\n\t\t\tthis.hideContentHover();\n\t\t\tthis._ignoreMouseEvents = true;\n\t\t}));\n\t\tthis._register(_contextMenuService.onDidHideContextMenu(() => {\n\t\t\tthis._ignoreMouseEvents = false;\n\t\t}));\n\t\tthis._hookListeners();\n\t\tthis._register(this._editor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (e.hasChanged(EditorOption.hover)) {\n\t\t\t\tthis._unhookListeners();\n\t\t\t\tthis._hookListeners();\n\t\t\t}\n\t\t}));\n\t}\n\n\tstatic get(editor: ICodeEditor): ContentHoverController | null {\n\t\treturn editor.getContribution<ContentHoverController>(ContentHoverController.ID);\n\t}\n\n\tprivate _hookListeners(): void {\n\t\tconst hoverOpts = this._editor.getOption(EditorOption.hover);\n\t\tthis._hoverSettings = {\n\t\t\tenabled: hoverOpts.enabled,\n\t\t\tsticky: hoverOpts.sticky,\n\t\t\thidingDelay: hoverOpts.hidingDelay\n\t\t};\n\t\tif (!hoverOpts.enabled) {\n\t\t\tthis._cancelSchedulerAndHide();\n\t\t}\n\t\tthis._listenersStore.add(this._editor.onMouseDown((e: IEditorMouseEvent) => this._onEditorMouseDown(e)));\n\t\tthis._listenersStore.add(this._editor.onMouseUp(() => this._onEditorMouseUp()));\n\t\tthis._listenersStore.add(this._editor.onMouseMove((e: IEditorMouseEvent) => this._onEditorMouseMove(e)));\n\t\tthis._listenersStore.add(this._editor.onKeyDown((e: IKeyboardEvent) => this._onKeyDown(e)));\n\t\tthis._listenersStore.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\n\t\tthis._listenersStore.add(this._editor.onDidChangeModel(() => this._cancelSchedulerAndHide()));\n\t\tthis._listenersStore.add(this._editor.onDidChangeModelContent(() => this._cancelScheduler()));\n\t\tthis._listenersStore.add(this._editor.onDidScrollChange((e: IScrollEvent) => this._onEditorScrollChanged(e)));\n\t}\n\n\tprivate _unhookListeners(): void {\n\t\tthis._listenersStore.clear();\n\t}\n\n\tprivate _cancelSchedulerAndHide(): void {\n\t\tthis._cancelScheduler();\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _cancelScheduler() {\n\t\tthis._mouseMoveEvent = undefined;\n\t\tthis._reactToEditorMouseMoveRunner.cancel();\n\t}\n\n\tprivate _onEditorScrollChanged(e: IScrollEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (e.scrollTopChanged || e.scrollLeftChanged) {\n\t\t\tthis.hideContentHover();\n\t\t}\n\t}\n\n\tprivate _onEditorMouseDown(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isMouseDown = true;\n\t\tconst shouldKeepHoverWidgetVisible = this._shouldKeepHoverWidgetVisible(mouseEvent);\n\t\tif (shouldKeepHoverWidgetVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _shouldKeepHoverWidgetVisible(mouseEvent: IPartialEditorMouseEvent): boolean {\n\t\treturn this._isMouseOnContentHoverWidget(mouseEvent) || this._isContentWidgetResizing() || isOnColorDecorator(mouseEvent);\n\t}\n\n\tprivate _isMouseOnContentHoverWidget(mouseEvent: IPartialEditorMouseEvent): boolean {\n\t\tif (!this._contentWidget) {\n\t\t\treturn false;\n\t\t}\n\t\treturn isMousePositionWithinElement(this._contentWidget.getDomNode(), mouseEvent.event.posx, mouseEvent.event.posy);\n\t}\n\n\tprivate _onEditorMouseUp(): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isMouseDown = false;\n\t}\n\n\tprivate _onEditorMouseLeave(mouseEvent: IPartialEditorMouseEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.shouldKeepOpenOnEditorMouseMoveOrLeave) {\n\t\t\treturn;\n\t\t}\n\t\tthis._cancelScheduler();\n\t\tconst shouldKeepHoverWidgetVisible = this._shouldKeepHoverWidgetVisible(mouseEvent);\n\t\tif (shouldKeepHoverWidgetVisible) {\n\t\t\treturn;\n\t\t}\n\t\tif (_sticky) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _shouldKeepCurrentHover(mouseEvent: IEditorMouseEvent): boolean {\n\t\tconst contentWidget = this._contentWidget;\n\t\tif (!contentWidget) {\n\t\t\treturn false;\n\t\t}\n\t\tconst isHoverSticky = this._hoverSettings.sticky;\n\t\tconst isMouseOnStickyContentHoverWidget = (mouseEvent: IEditorMouseEvent, isHoverSticky: boolean): boolean => {\n\t\t\tconst isMouseOnContentHoverWidget = this._isMouseOnContentHoverWidget(mouseEvent);\n\t\t\treturn isHoverSticky && isMouseOnContentHoverWidget;\n\t\t};\n\t\tconst isMouseOnColorPickerOrChoosingColor = (mouseEvent: IEditorMouseEvent): boolean => {\n\t\t\tconst isColorPickerVisible = contentWidget.isColorPickerVisible;\n\t\t\tconst isMouseOnContentHoverWidget = this._isMouseOnContentHoverWidget(mouseEvent);\n\t\t\tconst isMouseOnHoverWithColorPicker = isColorPickerVisible && isMouseOnContentHoverWidget;\n\t\t\tconst isMaybeChoosingColor = isColorPickerVisible && this._isMouseDown;\n\t\t\treturn isMouseOnHoverWithColorPicker || isMaybeChoosingColor;\n\t\t};\n\t\t// TODO@aiday-mar verify if the following is necessary code\n\t\tconst isTextSelectedWithinContentHoverWidget = (mouseEvent: IEditorMouseEvent, sticky: boolean): boolean => {\n\t\t\tconst view = mouseEvent.event.browserEvent.view;\n\t\t\tif (!view) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn sticky && contentWidget.containsNode(view.document.activeElement) && !view.getSelection()?.isCollapsed;\n\t\t};\n\t\tconst isFocused = contentWidget.isFocused;\n\t\tconst isResizing = contentWidget.isResizing;\n\t\tconst isStickyAndVisibleFromKeyboard = this._hoverSettings.sticky && contentWidget.isVisibleFromKeyboard;\n\n\t\treturn this.shouldKeepOpenOnEditorMouseMoveOrLeave\n\t\t\t|| isFocused\n\t\t\t|| isResizing\n\t\t\t|| isStickyAndVisibleFromKeyboard\n\t\t\t|| isMouseOnStickyContentHoverWidget(mouseEvent, isHoverSticky)\n\t\t\t|| isMouseOnColorPickerOrChoosingColor(mouseEvent)\n\t\t\t|| isTextSelectedWithinContentHoverWidget(mouseEvent, isHoverSticky);\n\t}\n\n\tprivate _onEditorMouseMove(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tthis._mouseMoveEvent = mouseEvent;\n\t\tconst shouldKeepCurrentHover = this._shouldKeepCurrentHover(mouseEvent);\n\t\tif (shouldKeepCurrentHover) {\n\t\t\tthis._reactToEditorMouseMoveRunner.cancel();\n\t\t\treturn;\n\t\t}\n\t\tconst shouldRescheduleHoverComputation = this._shouldRescheduleHoverComputation();\n\t\tif (shouldRescheduleHoverComputation) {\n\t\t\tif (!this._reactToEditorMouseMoveRunner.isScheduled()) {\n\t\t\t\tthis._reactToEditorMouseMoveRunner.schedule(this._hoverSettings.hidingDelay);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis._reactToEditorMouseMove(mouseEvent);\n\t}\n\n\tprivate _shouldRescheduleHoverComputation(): boolean {\n\t\tconst hidingDelay = this._hoverSettings.hidingDelay;\n\t\tconst isContentHoverWidgetVisible = this._contentWidget?.isVisible ?? false;\n\t\t// If the mouse is not over the widget, and if sticky is on,\n\t\t// then give it a grace period before reacting to the mouse event\n\t\treturn isContentHoverWidgetVisible && this._hoverSettings.sticky && hidingDelay > 0;\n\t}\n\n\tprivate _reactToEditorMouseMove(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._hoverSettings.enabled) {\n\t\t\tconst contentWidget: ContentHoverWidgetWrapper = this._getOrCreateContentWidget();\n\t\t\tif (contentWidget.showsOrWillShow(mouseEvent)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (_sticky) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _onKeyDown(e: IKeyboardEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._contentWidget) {\n\t\t\treturn;\n\t\t}\n\t\tconst isPotentialKeyboardShortcut = this._isPotentialKeyboardShortcut(e);\n\t\tconst isModifierKeyPressed = this._isModifierKeyPressed(e);\n\t\tif (isPotentialKeyboardShortcut || isModifierKeyPressed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._contentWidget.isFocused && e.keyCode === KeyCode.Tab) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _isPotentialKeyboardShortcut(e: IKeyboardEvent): boolean {\n\t\tif (!this._editor.hasModel() || !this._contentWidget) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resolvedKeyboardEvent = this._keybindingService.softDispatch(e, this._editor.getDomNode());\n\t\tconst moreChordsAreNeeded = resolvedKeyboardEvent.kind === ResultKind.MoreChordsNeeded;\n\t\tconst isHoverAction = resolvedKeyboardEvent.kind === ResultKind.KbFound\n\t\t\t&& (resolvedKeyboardEvent.commandId === SHOW_OR_FOCUS_HOVER_ACTION_ID\n\t\t\t\t|| resolvedKeyboardEvent.commandId === INCREASE_HOVER_VERBOSITY_ACTION_ID\n\t\t\t\t|| resolvedKeyboardEvent.commandId === DECREASE_HOVER_VERBOSITY_ACTION_ID)\n\t\t\t&& this._contentWidget.isVisible;\n\t\treturn moreChordsAreNeeded || isHoverAction;\n\t}\n\n\tprivate _isModifierKeyPressed(e: IKeyboardEvent): boolean {\n\t\treturn e.keyCode === KeyCode.Ctrl\n\t\t\t|| e.keyCode === KeyCode.Alt\n\t\t\t|| e.keyCode === KeyCode.Meta\n\t\t\t|| e.keyCode === KeyCode.Shift;\n\t}\n\n\tpublic hideContentHover(): void {\n\t\tif (_sticky) {\n\t\t\treturn;\n\t\t}\n\t\tif (InlineSuggestionHintsContentWidget.dropDownVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._contentWidget?.hide();\n\t}\n\n\tprivate _getOrCreateContentWidget(): ContentHoverWidgetWrapper {\n\t\tif (!this._contentWidget) {\n\t\t\tthis._contentWidget = this._instantiationService.createInstance(ContentHoverWidgetWrapper, this._editor);\n\t\t\tthis._listenersStore.add(this._contentWidget.onContentsChanged(() => this._onHoverContentsChanged.fire()));\n\t\t}\n\t\treturn this._contentWidget;\n\t}\n\n\tpublic showContentHover(\n\t\trange: Range,\n\t\tmode: HoverStartMode,\n\t\tsource: HoverStartSource,\n\t\tfocus: boolean\n\t): void {\n\t\tthis._getOrCreateContentWidget().startShowingAtRange(range, mode, source, focus);\n\t}\n\n\tprivate _isContentWidgetResizing(): boolean {\n\t\treturn this._contentWidget?.widget.isResizing || false;\n\t}\n\n\tpublic focusedHoverPartIndex(): number {\n\t\treturn this._getOrCreateContentWidget().focusedHoverPartIndex();\n\t}\n\n\tpublic updateHoverVerbosityLevel(action: HoverVerbosityAction, index: number, focus?: boolean): void {\n\t\tthis._getOrCreateContentWidget().updateHoverVerbosityLevel(action, index, focus);\n\t}\n\n\tpublic focus(): void {\n\t\tthis._contentWidget?.focus();\n\t}\n\n\tpublic scrollUp(): void {\n\t\tthis._contentWidget?.scrollUp();\n\t}\n\n\tpublic scrollDown(): void {\n\t\tthis._contentWidget?.scrollDown();\n\t}\n\n\tpublic scrollLeft(): void {\n\t\tthis._contentWidget?.scrollLeft();\n\t}\n\n\tpublic scrollRight(): void {\n\t\tthis._contentWidget?.scrollRight();\n\t}\n\n\tpublic pageUp(): void {\n\t\tthis._contentWidget?.pageUp();\n\t}\n\n\tpublic pageDown(): void {\n\t\tthis._contentWidget?.pageDown();\n\t}\n\n\tpublic goToTop(): void {\n\t\tthis._contentWidget?.goToTop();\n\t}\n\n\tpublic goToBottom(): void {\n\t\tthis._contentWidget?.goToBottom();\n\t}\n\n\tpublic get isColorPickerVisible(): boolean | undefined {\n\t\treturn this._contentWidget?.isColorPickerVisible;\n\t}\n\n\tpublic get isHoverVisible(): boolean | undefined {\n\t\treturn this._contentWidget?.isVisible;\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._unhookListeners();\n\t\tthis._listenersStore.dispose();\n\t\tthis._contentWidget?.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DECREASE_HOVER_VERBOSITY_ACTION_ID, INCREASE_HOVER_VERBOSITY_ACTION_ID, SHOW_OR_FOCUS_HOVER_ACTION_ID } from './hoverActionIds.js';\nimport { IKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor, IEditorMouseEvent, IPartialEditorMouseEvent } from '../../../browser/editorBrowser.js';\nimport { ConfigurationChangedEvent, EditorOption } from '../../../common/config/editorOptions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IEditorContribution, IScrollEvent } from '../../../common/editorCommon.js';\nimport { HoverStartMode, HoverStartSource } from './hoverOperation.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { InlineSuggestionHintsContentWidget } from '../../inlineCompletions/browser/hintsWidget/inlineCompletionsHintsWidget.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ResultKind } from '../../../../platform/keybinding/common/keybindingResolver.js';\nimport { HoverVerbosityAction } from '../../../common/languages.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { isMousePositionWithinElement } from './hoverUtils.js';\nimport { ContentHoverWidgetWrapper } from './contentHoverWidgetWrapper.js';\nimport './hover.css';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { isOnColorDecorator } from '../../colorPicker/browser/hoverColorPicker/hoverColorPicker.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n\n// sticky hover widget which doesn't disappear on focus out and such\nconst _sticky = false\n\t// || Boolean(\"true\") // done \"weirdly\" so that a lint warning prevents you from pushing this\n\t;\n\ninterface IHoverSettings {\n\treadonly enabled: boolean;\n\treadonly sticky: boolean;\n\treadonly hidingDelay: number;\n}\n\nexport class ContentHoverController extends Disposable implements IEditorContribution {\n\n\tprivate readonly _onHoverContentsChanged = this._register(new Emitter<void>());\n\n\tpublic static readonly ID = 'editor.contrib.contentHover';\n\n\tpublic shouldKeepOpenOnEditorMouseMoveOrLeave: boolean = false;\n\n\tprivate readonly _listenersStore = new DisposableStore();\n\n\tprivate _contentWidget: ContentHoverWidgetWrapper | undefined;\n\n\tprivate _mouseMoveEvent: IEditorMouseEvent | undefined;\n\tprivate _reactToEditorMouseMoveRunner: RunOnceScheduler;\n\n\tprivate _hoverSettings!: IHoverSettings;\n\tprivate _isMouseDown: boolean = false;\n\n\tprivate _ignoreMouseEvents: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@IContextMenuService _contextMenuService: IContextMenuService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@IKeybindingService private readonly _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\t\tthis._reactToEditorMouseMoveRunner = this._register(new RunOnceScheduler(\n\t\t\t() => {\n\t\t\t\tif (this._mouseMoveEvent) {\n\t\t\t\t\tthis._reactToEditorMouseMove(this._mouseMoveEvent);\n\t\t\t\t}\n\t\t\t}, 0\n\t\t));\n\t\tthis._register(_contextMenuService.onDidShowContextMenu(() => {\n\t\t\tthis.hideContentHover();\n\t\t\tthis._ignoreMouseEvents = true;\n\t\t}));\n\t\tthis._register(_contextMenuService.onDidHideContextMenu(() => {\n\t\t\tthis._ignoreMouseEvents = false;\n\t\t}));\n\t\tthis._hookListeners();\n\t\tthis._register(this._editor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (e.hasChanged(EditorOption.hover)) {\n\t\t\t\tthis._unhookListeners();\n\t\t\t\tthis._hookListeners();\n\t\t\t}\n\t\t}));\n\t}\n\n\tstatic get(editor: ICodeEditor): ContentHoverController | null {\n\t\treturn editor.getContribution<ContentHoverController>(ContentHoverController.ID);\n\t}\n\n\tprivate _hookListeners(): void {\n\t\tconst hoverOpts = this._editor.getOption(EditorOption.hover);\n\t\tthis._hoverSettings = {\n\t\t\tenabled: hoverOpts.enabled,\n\t\t\tsticky: hoverOpts.sticky,\n\t\t\thidingDelay: hoverOpts.hidingDelay\n\t\t};\n\t\tif (!hoverOpts.enabled) {\n\t\t\tthis._cancelSchedulerAndHide();\n\t\t}\n\t\tthis._listenersStore.add(this._editor.onMouseDown((e: IEditorMouseEvent) => this._onEditorMouseDown(e)));\n\t\tthis._listenersStore.add(this._editor.onMouseUp(() => this._onEditorMouseUp()));\n\t\tthis._listenersStore.add(this._editor.onMouseMove((e: IEditorMouseEvent) => this._onEditorMouseMove(e)));\n\t\tthis._listenersStore.add(this._editor.onKeyDown((e: IKeyboardEvent) => this._onKeyDown(e)));\n\t\tthis._listenersStore.add(this._editor.onMouseLeave((e) => this._onEditorMouseLeave(e)));\n\t\tthis._listenersStore.add(this._editor.onDidChangeModel(() => this._cancelSchedulerAndHide()));\n\t\tthis._listenersStore.add(this._editor.onDidChangeModelContent(() => this._cancelScheduler()));\n\t\tthis._listenersStore.add(this._editor.onDidScrollChange((e: IScrollEvent) => this._onEditorScrollChanged(e)));\n\t}\n\n\tprivate _unhookListeners(): void {\n\t\tthis._listenersStore.clear();\n\t}\n\n\tprivate _cancelSchedulerAndHide(): void {\n\t\tthis._cancelScheduler();\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _cancelScheduler() {\n\t\tthis._mouseMoveEvent = undefined;\n\t\tthis._reactToEditorMouseMoveRunner.cancel();\n\t}\n\n\tprivate _onEditorScrollChanged(e: IScrollEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (e.scrollTopChanged || e.scrollLeftChanged) {\n\t\t\tthis.hideContentHover();\n\t\t}\n\t}\n\n\tprivate _onEditorMouseDown(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isMouseDown = true;\n\t\tconst shouldKeepHoverWidgetVisible = this._shouldKeepHoverWidgetVisible(mouseEvent);\n\t\tif (shouldKeepHoverWidgetVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _shouldKeepHoverWidgetVisible(mouseEvent: IPartialEditorMouseEvent): boolean {\n\t\treturn this._isMouseOnContentHoverWidget(mouseEvent) || this._isContentWidgetResizing() || isOnColorDecorator(mouseEvent);\n\t}\n\n\tprivate _isMouseOnContentHoverWidget(mouseEvent: IPartialEditorMouseEvent): boolean {\n\t\tif (!this._contentWidget) {\n\t\t\treturn false;\n\t\t}\n\t\treturn isMousePositionWithinElement(this._contentWidget.getDomNode(), mouseEvent.event.posx, mouseEvent.event.posy);\n\t}\n\n\tprivate _onEditorMouseUp(): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isMouseDown = false;\n\t}\n\n\tprivate _onEditorMouseLeave(mouseEvent: IPartialEditorMouseEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.shouldKeepOpenOnEditorMouseMoveOrLeave) {\n\t\t\treturn;\n\t\t}\n\t\tthis._cancelScheduler();\n\t\tconst shouldKeepHoverWidgetVisible = this._shouldKeepHoverWidgetVisible(mouseEvent);\n\t\tif (shouldKeepHoverWidgetVisible) {\n\t\t\treturn;\n\t\t}\n\t\tif (_sticky) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _shouldKeepCurrentHover(mouseEvent: IEditorMouseEvent): boolean {\n\t\tconst contentWidget = this._contentWidget;\n\t\tif (!contentWidget) {\n\t\t\treturn false;\n\t\t}\n\t\tconst isHoverSticky = this._hoverSettings.sticky;\n\t\tconst isMouseOnStickyContentHoverWidget = (mouseEvent: IEditorMouseEvent, isHoverSticky: boolean): boolean => {\n\t\t\tconst isMouseOnContentHoverWidget = this._isMouseOnContentHoverWidget(mouseEvent);\n\t\t\treturn isHoverSticky && isMouseOnContentHoverWidget;\n\t\t};\n\t\tconst isMouseOnColorPickerOrChoosingColor = (mouseEvent: IEditorMouseEvent): boolean => {\n\t\t\tconst isColorPickerVisible = contentWidget.isColorPickerVisible;\n\t\t\tconst isMouseOnContentHoverWidget = this._isMouseOnContentHoverWidget(mouseEvent);\n\t\t\tconst isMouseOnHoverWithColorPicker = isColorPickerVisible && isMouseOnContentHoverWidget;\n\t\t\tconst isMaybeChoosingColor = isColorPickerVisible && this._isMouseDown;\n\t\t\treturn isMouseOnHoverWithColorPicker || isMaybeChoosingColor;\n\t\t};\n\t\t// TODO@aiday-mar verify if the following is necessary code\n\t\tconst isTextSelectedWithinContentHoverWidget = (mouseEvent: IEditorMouseEvent, sticky: boolean): boolean => {\n\t\t\tconst view = mouseEvent.event.browserEvent.view;\n\t\t\tif (!view) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn sticky && contentWidget.containsNode(view.document.activeElement) && !view.getSelection()?.isCollapsed;\n\t\t};\n\t\tconst isFocused = contentWidget.isFocused;\n\t\tconst isResizing = contentWidget.isResizing;\n\t\tconst isStickyAndVisibleFromKeyboard = this._hoverSettings.sticky && contentWidget.isVisibleFromKeyboard;\n\n\t\treturn this.shouldKeepOpenOnEditorMouseMoveOrLeave\n\t\t\t|| isFocused\n\t\t\t|| isResizing\n\t\t\t|| isStickyAndVisibleFromKeyboard\n\t\t\t|| isMouseOnStickyContentHoverWidget(mouseEvent, isHoverSticky)\n\t\t\t|| isMouseOnColorPickerOrChoosingColor(mouseEvent)\n\t\t\t|| isTextSelectedWithinContentHoverWidget(mouseEvent, isHoverSticky);\n\t}\n\n\tprivate _onEditorMouseMove(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tthis._mouseMoveEvent = mouseEvent;\n\t\tconst shouldKeepCurrentHover = this._shouldKeepCurrentHover(mouseEvent);\n\t\tif (shouldKeepCurrentHover) {\n\t\t\tthis._reactToEditorMouseMoveRunner.cancel();\n\t\t\treturn;\n\t\t}\n\t\tconst shouldRescheduleHoverComputation = this._shouldRescheduleHoverComputation();\n\t\tif (shouldRescheduleHoverComputation) {\n\t\t\tif (!this._reactToEditorMouseMoveRunner.isScheduled()) {\n\t\t\t\tthis._reactToEditorMouseMoveRunner.schedule(this._hoverSettings.hidingDelay);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis._reactToEditorMouseMove(mouseEvent);\n\t}\n\n\tprivate _shouldRescheduleHoverComputation(): boolean {\n\t\tconst hidingDelay = this._hoverSettings.hidingDelay;\n\t\tconst isContentHoverWidgetVisible = this._contentWidget?.isVisible ?? false;\n\t\t// If the mouse is not over the widget, and if sticky is on,\n\t\t// then give it a grace period before reacting to the mouse event\n\t\treturn isContentHoverWidgetVisible && this._hoverSettings.sticky && hidingDelay > 0;\n\t}\n\n\tprivate _reactToEditorMouseMove(mouseEvent: IEditorMouseEvent): void {\n\t\tif (this._hoverSettings.enabled) {\n\t\t\tconst contentWidget: ContentHoverWidgetWrapper = this._getOrCreateContentWidget();\n\t\t\tif (contentWidget.showsOrWillShow(mouseEvent)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (_sticky) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _onKeyDown(e: IKeyboardEvent): void {\n\t\tif (this._ignoreMouseEvents) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._contentWidget) {\n\t\t\treturn;\n\t\t}\n\t\tconst isPotentialKeyboardShortcut = this._isPotentialKeyboardShortcut(e);\n\t\tconst isModifierKeyPressed = this._isModifierKeyPressed(e);\n\t\tif (isPotentialKeyboardShortcut || isModifierKeyPressed) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._contentWidget.isFocused && e.keyCode === KeyCode.Tab) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hideContentHover();\n\t}\n\n\tprivate _isPotentialKeyboardShortcut(e: IKeyboardEvent): boolean {\n\t\tif (!this._editor.hasModel() || !this._contentWidget) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resolvedKeyboardEvent = this._keybindingService.softDispatch(e, this._editor.getDomNode());\n\t\tconst moreChordsAreNeeded = resolvedKeyboardEvent.kind === ResultKind.MoreChordsNeeded;\n\t\tconst isHoverAction = resolvedKeyboardEvent.kind === ResultKind.KbFound\n\t\t\t&& (resolvedKeyboardEvent.commandId === SHOW_OR_FOCUS_HOVER_ACTION_ID\n\t\t\t\t|| resolvedKeyboardEvent.commandId === INCREASE_HOVER_VERBOSITY_ACTION_ID\n\t\t\t\t|| resolvedKeyboardEvent.commandId === DECREASE_HOVER_VERBOSITY_ACTION_ID)\n\t\t\t&& this._contentWidget.isVisible;\n\t\treturn moreChordsAreNeeded || isHoverAction;\n\t}\n\n\tprivate _isModifierKeyPressed(e: IKeyboardEvent): boolean {\n\t\treturn e.keyCode === KeyCode.Ctrl\n\t\t\t|| e.keyCode === KeyCode.Alt\n\t\t\t|| e.keyCode === KeyCode.Meta\n\t\t\t|| e.keyCode === KeyCode.Shift;\n\t}\n\n\tpublic hideContentHover(): void {\n\t\tif (_sticky) {\n\t\t\treturn;\n\t\t}\n\t\tif (InlineSuggestionHintsContentWidget.dropDownVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._contentWidget?.hide();\n\t}\n\n\tprivate _getOrCreateContentWidget(): ContentHoverWidgetWrapper {\n\t\tif (!this._contentWidget) {\n\t\t\tthis._contentWidget = this._instantiationService.createInstance(ContentHoverWidgetWrapper, this._editor);\n\t\t\tthis._listenersStore.add(this._contentWidget.onContentsChanged(() => this._onHoverContentsChanged.fire()));\n\t\t}\n\t\treturn this._contentWidget;\n\t}\n\n\tpublic showContentHover(\n\t\trange: Range,\n\t\tmode: HoverStartMode,\n\t\tsource: HoverStartSource,\n\t\tfocus: boolean\n\t): void {\n\t\tthis._getOrCreateContentWidget().startShowingAtRange(range, mode, source, focus);\n\t}\n\n\tprivate _isContentWidgetResizing(): boolean {\n\t\treturn this._contentWidget?.widget.isResizing || false;\n\t}\n\n\tpublic focusedHoverPartIndex(): number {\n\t\treturn this._getOrCreateContentWidget().focusedHoverPartIndex();\n\t}\n\n\tpublic updateHoverVerbosityLevel(action: HoverVerbosityAction, index: number, focus?: boolean): void {\n\t\tthis._getOrCreateContentWidget().updateHoverVerbosityLevel(action, index, focus);\n\t}\n\n\tpublic focus(): void {\n\t\tthis._contentWidget?.focus();\n\t}\n\n\tpublic scrollUp(): void {\n\t\tthis._contentWidget?.scrollUp();\n\t}\n\n\tpublic scrollDown(): void {\n\t\tthis._contentWidget?.scrollDown();\n\t}\n\n\tpublic scrollLeft(): void {\n\t\tthis._contentWidget?.scrollLeft();\n\t}\n\n\tpublic scrollRight(): void {\n\t\tthis._contentWidget?.scrollRight();\n\t}\n\n\tpublic pageUp(): void {\n\t\tthis._contentWidget?.pageUp();\n\t}\n\n\tpublic pageDown(): void {\n\t\tthis._contentWidget?.pageDown();\n\t}\n\n\tpublic goToTop(): void {\n\t\tthis._contentWidget?.goToTop();\n\t}\n\n\tpublic goToBottom(): void {\n\t\tthis._contentWidget?.goToBottom();\n\t}\n\n\tpublic get isColorPickerVisible(): boolean | undefined {\n\t\treturn this._contentWidget?.isColorPickerVisible;\n\t}\n\n\tpublic get isHoverVisible(): boolean | undefined {\n\t\treturn this._contentWidget?.isVisible;\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._unhookListeners();\n\t\tthis._listenersStore.dispose();\n\t\tthis._contentWidget?.dispose();\n\t}\n}\n"]}