!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e||self).eta={})}(this,function(e){function n(e){var t,r,i=new Error(e);return t=i,r=n.prototype,Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r,i}function t(e,t,r){var i=t.slice(0,r).split(/\n/),a=i.length,c=i[a-1].length+1;throw n(e+=" at line "+a+" col "+c+":\n\n  "+t.split(/\n/)[a-1]+"\n  "+Array(c).join(" ")+"^")}n.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});var r=new Function("return this")().Promise;function i(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function c(e){return a[e]}var o=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,s=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,l=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function u(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function p(e,n){var r=[],i=!1,a=0,c=n.parse;if(n.plugins)for(var p=0;p<n.plugins.length;p++){var f=n.plugins[p];f.processTemplate&&(e=f.processTemplate(e,n))}function d(e,t){e&&(e=function(e,n,t,r){var i,a;return Array.isArray(n.autoTrim)?(i=n.autoTrim[1],a=n.autoTrim[0]):i=a=n.autoTrim,(t||!1===t)&&(i=t),(r||!1===r)&&(a=r),a||i?"slurp"===i&&"slurp"===a?e.trim():("_"===i||"slurp"===i?e=function(e){return String.prototype.trimLeft?e.trimLeft():e.replace(/^\s+/,"")}(e):"-"!==i&&"nl"!==i||(e=e.replace(/^(?:\r\n|\n|\r)/,"")),"_"===a||"slurp"===a?e=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/\s+$/,"")}(e):"-"!==a&&"nl"!==a||(e=e.replace(/(?:\r\n|\n|\r)$/,"")),e):e}(e,n,i,t))&&(e=e.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),r.push(e))}n.rmWhitespace&&(e=e.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),o.lastIndex=0,s.lastIndex=0,l.lastIndex=0;for(var g,h=[c.exec,c.interpolate,c.raw].reduce(function(e,n){return e&&n?e+"|"+u(n):n?u(n):e},""),m=new RegExp(u(n.tags[0])+"(-|_)?\\s*("+h+")?\\s*","g"),v=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+u(n.tags[1])+")","g");g=m.exec(e);){var x=e.slice(a,g.index);a=g[0].length+g.index;var y=g[2]||"";d(x,g[1]),v.lastIndex=a;for(var _=void 0,w=!1;_=v.exec(e);){if(_[1]){var b=e.slice(a,_.index);m.lastIndex=a=v.lastIndex,i=_[2],w={t:y===c.exec?"e":y===c.raw?"r":y===c.interpolate?"i":"",val:b};break}var E=_[0];if("/*"===E){var I=e.indexOf("*/",v.lastIndex);-1===I&&t("unclosed comment",e,_.index),v.lastIndex=I}else"'"===E?(s.lastIndex=_.index,s.exec(e)?v.lastIndex=s.lastIndex:t("unclosed string",e,_.index)):'"'===E?(l.lastIndex=_.index,l.exec(e)?v.lastIndex=l.lastIndex:t("unclosed string",e,_.index)):"`"===E&&(o.lastIndex=_.index,o.exec(e)?v.lastIndex=o.lastIndex:t("unclosed string",e,_.index))}w?r.push(w):t("unclosed tag",e,g.index+x.length)}if(d(e.slice(a,e.length),!1),n.plugins)for(var R=0;R<n.plugins.length;R++){var T=n.plugins[R];T.processAST&&(r=T.processAST(r,n))}return r}function f(e,n){var t=p(e,n),r="var tR='',__l,__lP"+(n.include?",include=E.include.bind(E)":"")+(n.includeFile?",includeFile=E.includeFile.bind(E)":"")+"\nfunction layout(p,d){__l=p;__lP=d}\n"+(n.useWith?"with("+n.varName+"||{}){":"")+function(e,n){for(var t=0,r=e.length,i="";t<r;t++){var a=e[t];if("string"==typeof a)i+="tR+='"+a+"'\n";else{var c=a.t,o=a.val||"";"r"===c?(n.filter&&(o="E.filter("+o+")"),i+="tR+="+o+"\n"):"i"===c?(n.filter&&(o="E.filter("+o+")"),n.autoEscape&&(o="E.e("+o+")"),i+="tR+="+o+"\n"):"e"===c&&(i+=o+"\n")}}return i}(t,n)+(n.includeFile?"if(__l)tR="+(n.async?"await ":"")+"includeFile(__l,Object.assign("+n.varName+",{body:tR},__lP))\n":n.include?"if(__l)tR="+(n.async?"await ":"")+"include(__l,Object.assign("+n.varName+",{body:tR},__lP))\n":"")+"if(cb){cb(null,tR)} return tR"+(n.useWith?"}":"");if(n.plugins)for(var i=0;i<n.plugins.length;i++){var a=n.plugins[i];a.processFnString&&(r=a.processFnString(r,n))}return r}var d=new(/*#__PURE__*/function(){function e(e){this.cache=void 0,this.cache=e}var n=e.prototype;return n.define=function(e,n){this.cache[e]=n},n.get=function(e){return this.cache[e]},n.remove=function(e){delete this.cache[e]},n.reset=function(){this.cache={}},n.load=function(e){i(this.cache,e)},e}())({}),g={async:!1,autoEscape:!0,autoTrim:[!1,"nl"],cache:!1,e:function(e){var n=String(e);return/[&<>"']/.test(n)?n.replace(/[&<>"']/g,c):n},include:function(e,t){var r=this.templates.get(e);if(!r)throw n('Could not fetch template "'+e+'"');return r(t,this)},parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],templates:d,useWith:!1,varName:"it"};function h(e,n){var t={};return i(t,g),n&&i(t,n),e&&i(t,e),t}function m(e,t){var r=h(t||{}),i=r.async?function(){try{return new Function("return (async function(){}).constructor")()}catch(e){throw e instanceof SyntaxError?n("This environment doesn't support async/await"):e}}():Function;try{return new i(r.varName,"E","cb",f(e,r))}catch(t){throw t instanceof SyntaxError?n("Bad template syntax\n\n"+t.message+"\n"+Array(t.message.length+1).join("=")+"\n"+f(e,r)+"\n"):t}}function v(e,n){if(n.cache&&n.name&&n.templates.get(n.name))return n.templates.get(n.name);var t="function"==typeof e?e:m(e,n);return n.cache&&n.name&&n.templates.define(n.name,t),t}function x(e,t,i,a){var c=h(i||{});if(!c.async)return v(e,c)(t,c);if(!a){if("function"==typeof r)return new r(function(n,r){try{n(v(e,c)(t,c))}catch(e){r(e)}});throw n("Please provide a callback function, this env doesn't support Promises")}try{v(e,c)(t,c,a)}catch(e){return a(e)}}e.compile=m,e.compileToString=f,e.config=g,e.configure=function(e){return i(g,e)},e.defaultConfig=g,e.getConfig=h,e.parse=p,e.render=x,e.renderAsync=function(e,n,t,r){return x(e,n,Object.assign({},t,{async:!0}),r)},e.templates=d});
//# sourceMappingURL=browser.min.umd.js.map
